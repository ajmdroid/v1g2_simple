import{f,a as m}from"../chunks/CJzwpuKh.js";import{o as qt}from"../chunks/tgyn-xxr.js";import{p as zt,s as F,a as ct,t as S,b as Jt,c as d,d as l,e as i,r as s,g as t,f as pt}from"../chunks/fsS-m6VO.js";import{d as Kt,s as P}from"../chunks/jRq-jFgM.js";import{i as y}from"../chunks/DGklRumq.js";import{e as ut,i as mt}from"../chunks/BzWd8bhm.js";import{r as Q,s as h}from"../chunks/CcDg8Ibl.js";import{s as R}from"../chunks/DOhhwrM8.js";import{b as W}from"../chunks/DQHpviRV.js";import{b as ft}from"../chunks/DnVtuXwL.js";var Qt=f('<div role="status" aria-live="polite"><span> </span></div>'),Rt=f('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),Wt=f('<input type="text" class="input input-bordered input-sm w-40"/>'),Xt=f('<h3 class="font-bold text-lg"> </h3>'),Yt=f('<span class="badge badge-primary badge-sm">Active</span>'),Zt=f('<button class="btn btn-success btn-sm">üíæ Save</button> <button class="btn btn-ghost btn-sm">Cancel</button>',1),te=f('<button class="btn btn-ghost btn-sm">‚úèÔ∏è</button>'),ee=f("<option> </option>"),ae=f(`<div class="grid grid-cols-2 gap-3 mt-3"><div class="form-control"><label class="label py-1"><span class="label-text text-xs">Profile</span></label> <select class="select select-bordered select-sm"><option>-- None --</option><!></select></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">V1 Mode</span></label> <select class="select select-bordered select-sm"><option>Don't Change</option><option>All Bogeys</option><option>Logic</option><option>Adv Logic</option></select></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">Volume (0-9)</span></label> <input type="number" class="input input-bordered input-sm" min="0" max="9"/></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">Mute Volume (0-9)</span></label> <input type="number" class="input input-bordered input-sm" min="0" max="9"/></div></div>`),oe=f('<div class="grid grid-cols-2 gap-x-4 gap-y-1 text-sm mt-2"><div class="text-base-content/60">Profile:</div> <div class="font-medium"> </div> <div class="text-base-content/60">Mode:</div> <div class="font-medium"> </div> <div class="text-base-content/60">Volume:</div> <div class="font-medium"> </div></div>'),se=f('<button class="btn btn-outline btn-sm">Activate</button>'),re=f('<div class="card-actions justify-end mt-3"><!> <button class="btn btn-primary btn-sm">‚¨ÜÔ∏è Push Now</button></div>'),le=f('<div><div class="card-body p-4"><div class="flex justify-between items-start"><div class="flex items-center gap-3"><div class="text-3xl"> </div> <div><!> <!></div></div> <div class="flex gap-1"><!></div></div> <!> <!></div></div>'),ie=f('<div class="alert alert-warning"><span>No saved profiles. Go to V1 Profiles to pull settings from your V1 first.</span></div>'),ne=f('<div class="grid gap-4"></div> <!>',1),ve=f('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">Auto-Push Profiles</h1> <div> </div></div> <!> <div class="text-sm text-base-content/60 bg-base-200 p-3 rounded-lg"><p>Auto-Push automatically sends V1 settings when you connect. Configure 3 slots for different driving scenarios and switch between them with a touch.</p></div> <!></div>');function ye(_t,bt){zt(bt,!0);let b=F(ct({enabled:!1,activeSlot:0,slots:[]})),M=F(ct([])),X=F(!0),p=F(null),V=F(null);const gt={0:"Unknown",1:"All Bogeys",2:"Logic",3:"Adv Logic"},Y=["Default","Highway","Comfort"],xt=["üè†","üèéÔ∏è","üë•"];qt(async()=>{await Promise.all([yt(),ht()]),d(X,!1)});async function yt(){try{const e=await fetch("/api/autopush/slots");e.ok&&d(b,await e.json(),!0)}catch{d(p,{type:"error",text:"Failed to load slots"},!0)}}async function ht(){try{const e=await fetch("/api/v1/profiles");if(e.ok){const r=await e.json();d(M,r.profiles||[],!0)}}catch{console.error("Failed to fetch profiles")}}async function wt(e){d(p,{type:"info",text:`Activating slot ${e}...`},!0);try{const r=new FormData;r.append("slot",e),r.append("enable","true"),(await fetch("/api/autopush/activate",{method:"POST",body:r})).ok?(t(b).activeSlot=e,t(b).enabled=!0,d(p,{type:"success",text:`Slot ${e} activated`},!0)):d(p,{type:"error",text:"Failed to activate"},!0)}catch{d(p,{type:"error",text:"Connection error"},!0)}}async function St(e){d(p,{type:"info",text:"Pushing settings to V1..."},!0);try{const r=new FormData;r.append("slot",e);const v=await fetch("/api/autopush/push",{method:"POST",body:r});if(v.ok)d(p,{type:"success",text:"Settings pushed to V1!"},!0);else{const A=await v.json();d(p,{type:"error",text:A.error||"Push failed"},!0)}}catch{d(p,{type:"error",text:"Connection error"},!0)}}async function Pt(e){const r=t(b).slots[e];d(p,{type:"info",text:"Saving slot..."},!0);try{const v=new FormData;v.append("slot",e),v.append("name",r.name),v.append("profile",r.profile),v.append("mode",r.mode),v.append("volume",r.volume),v.append("muteVol",r.muteVolume),(await fetch("/api/autopush/slot",{method:"POST",body:v})).ok?(d(p,{type:"success",text:"Slot saved!"},!0),d(V,null)):d(p,{type:"error",text:"Failed to save"},!0)}catch{d(p,{type:"error",text:"Connection error"},!0)}}var L=ve(),O=l(L),T=i(l(O),2),Vt=l(T,!0);s(T),s(O);var Z=i(O,2);{var kt=e=>{var r=Qt(),v=l(r),A=l(v,!0);s(v),s(r),S(()=>{R(r,1,`alert alert-${t(p).type==="error"?"error":t(p).type==="success"?"success":"info"}`),P(A,t(p).text)}),m(e,r)};y(Z,e=>{t(p)&&e(kt)})}var At=i(Z,4);{var Dt=e=>{var r=Rt();m(e,r)},jt=e=>{var r=ne(),v=pt(r);ut(v,21,()=>t(b).slots,mt,(D,c,n)=>{var $=le(),tt=l($),B=l(tt),E=l(B),G=l(E),Ft=l(G,!0);s(G);var et=i(G,2),at=l(et);{var $t=a=>{var o=Wt();Q(o),S(()=>h(o,"placeholder",Y[n])),W(o,()=>t(c).name,u=>t(c).name=u),m(a,o)},Nt=a=>{var o=Xt(),u=l(o,!0);s(o),S(()=>P(u,t(c).name||Y[n])),m(a,o)};y(at,a=>{t(V)===n?a($t):a(Nt,!1)})}var Mt=i(at,2);{var Lt=a=>{var o=Yt();m(a,o)};y(Mt,a=>{t(b).activeSlot===n&&a(Lt)})}s(et),s(E);var ot=i(E,2),Ot=l(ot);{var Tt=a=>{var o=Zt(),u=pt(o);u.__click=()=>Pt(n);var w=i(u,2);w.__click=()=>d(V,null),m(a,o)},Bt=a=>{var o=te();o.__click=()=>d(V,n,!0),m(a,o)};y(Ot,a=>{t(V)===n?a(Tt):a(Bt,!1)})}s(ot),s(B);var st=i(B,2);{var Et=a=>{var o=ae(),u=l(o),w=l(u);h(w,"for",`slot-${n}-profile`);var _=i(w,2);h(_,"id",`slot-${n}-profile`);var g=l(_);g.value=g.__value="";var k=i(g);ut(k,17,()=>t(M),mt,(x,K)=>{var C=ee(),Ut=l(C,!0);s(C);var dt={};S(()=>{P(Ut,t(K).name),dt!==(dt=t(K).name)&&(C.value=(C.__value=t(K).name)??"")}),m(x,C)}),s(_),s(u);var j=i(u,2),rt=l(j);h(rt,"for",`slot-${n}-mode`);var N=i(rt,2);h(N,"id",`slot-${n}-mode`);var H=l(N);H.value=H.__value=0;var I=i(H);I.value=I.__value=1;var U=i(I);U.value=U.__value=2;var lt=i(U);lt.value=lt.__value=3,s(N),s(j);var q=i(j,2),it=l(q);h(it,"for",`slot-${n}-volume`);var z=i(it,2);Q(z),h(z,"id",`slot-${n}-volume`),s(q);var nt=i(q,2),vt=l(nt);h(vt,"for",`slot-${n}-mute`);var J=i(vt,2);Q(J),h(J,"id",`slot-${n}-mute`),s(nt),s(o),ft(_,()=>t(c).profile,x=>t(c).profile=x),ft(N,()=>t(c).mode,x=>t(c).mode=x),W(z,()=>t(c).volume,x=>t(c).volume=x),W(J,()=>t(c).muteVolume,x=>t(c).muteVolume=x),m(a,o)},Gt=a=>{var o=oe(),u=i(l(o),2),w=l(u,!0);s(u);var _=i(u,4),g=l(_,!0);s(_);var k=i(_,4),j=l(k);s(k),s(o),S(()=>{P(w,t(c).profile||"‚Äî"),P(g,gt[t(c).mode]||"‚Äî"),P(j,`${t(c).volume??""} / Mute: ${t(c).muteVolume??""}`)}),m(a,o)};y(st,a=>{t(V)===n?a(Et):a(Gt,!1)})}var Ht=i(st,2);{var It=a=>{var o=re(),u=l(o);{var w=g=>{var k=se();k.__click=()=>wt(n),m(g,k)};y(u,g=>{t(b).activeSlot!==n&&g(w)})}var _=i(u,2);_.__click=()=>St(n),s(o),S(()=>_.disabled=!t(c).profile),m(a,o)};y(Ht,a=>{t(V)!==n&&a(It)})}s(tt),s($),S(()=>{R($,1,`card bg-base-200 ${t(b).activeSlot===n?"ring-2 ring-primary":""}`),P(Ft,xt[n])}),m(D,$)}),s(v);var A=i(v,2);{var Ct=D=>{var c=ie();m(D,c)};y(A,D=>{t(M).length===0&&D(Ct)})}m(e,r)};y(At,e=>{t(X)?e(Dt):e(jt,!1)})}s(L),S(()=>{R(T,1,`badge ${t(b).enabled?"badge-success":"badge-ghost"}`),P(Vt,t(b).enabled?"Enabled":"Disabled")}),m(_t,L),Jt()}Kt(["click"]);export{ye as component};
