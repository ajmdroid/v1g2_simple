import{f as m,a as b,c as ze}from"../chunks/BAToY3dM.js";import{o as Vt}from"../chunks/tgyn-xxr.js";import{p as Dt,s as F,a as Ct,t as M,b as Ft,e as s,d as i,c as n,r as l,g as e,n as f,f as G,u as Mt}from"../chunks/fsS-m6VO.js";import{d as Ot,s as L}from"../chunks/DKvjqhBm.js";import{i as P}from"../chunks/DGklRumq.js";import{e as Rt,i as Tt}from"../chunks/BzWd8bhm.js";import{r as _}from"../chunks/DtA2OqT-.js";import{s as Ge}from"../chunks/DOhhwrM8.js";import{b as Ie,a as x}from"../chunks/DQHpviRV.js";import{b as U}from"../chunks/DnVtuXwL.js";var Lt=m('<div role="status" aria-live="polite"><span> </span></div>'),jt=m('<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg">üíæ Save Profile</h3> <div class="py-4 space-y-4"><div class="form-control"><label class="label" for="profile-name"><span class="label-text">Profile Name</span></label> <input id="profile-name" type="text" placeholder="e.g., Highway, City, Custom" class="input input-bordered w-full"/></div> <div class="form-control"><label class="label" for="profile-description"><span class="label-text">Description (optional)</span></label> <input id="profile-description" type="text" placeholder="e.g., Max sensitivity for open roads" class="input input-bordered w-full"/></div></div> <div class="modal-action"><button class="btn btn-ghost">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),Kt=m('<p class="text-warning">Connect to V1 to view/edit settings</p>'),Nt=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Original</option><option>Full</option></select>'),qt=m("<span> </span>"),At=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),Bt=m("<span> </span>"),Ht=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),Et=m("<span> </span>"),Xt=m('<select class="select select-bordered select-xs"><option>On</option><option>Advanced</option><option>Off</option></select>'),Jt=m("<span> </span>"),zt=m('<div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"><div class="col-span-2 md:col-span-3 font-bold text-base">Band Detection</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>X Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ku Band</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Sensitivity</div> <div class="flex items-center gap-2"><span class="min-w-12">Ka:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">K:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">X:</span> <!></div> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Features</div> <div class="flex items-center gap-2"><span class="min-w-24">Auto Mute:</span> <!></div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Verifier (TMF)</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Fast Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Euro Mode</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>MRCT</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Display</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Startup Sequence</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Resting Display</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Bogey Lock Loud</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Advanced</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute X/K Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Always Priority</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute to Mute Vol</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Custom Freqs</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>BSM Plus</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D HD</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Redflex Halo</span></label></div>'),Gt=m('<p class="text-base-content/60">No settings available. Pull from V1 to view.</p>'),It=m('<button class="btn btn-ghost btn-sm">Cancel</button> <button class="btn btn-success btn-sm">‚úÖ Push to V1</button>',1),Qt=m('<button class="btn btn-secondary btn-sm">‚úèÔ∏è Edit</button> <button class="btn btn-success btn-sm">üíæ Save</button>',1),Ut=m('<button class="btn btn-primary btn-sm">‚¨áÔ∏è Pull from V1</button> <!>',1),Wt=m('<div class="flex justify-center p-4"><span class="loading loading-spinner"></span></div>'),Yt=m('<p class="text-base-content/60">No saved profiles. Pull settings from V1 to create one.</p>'),Zt=m('<div class="flex justify-between items-center p-3 bg-base-300 rounded-lg"><div><div class="font-medium"> </div> <div class="text-xs text-base-content/60"> </div></div> <div class="flex gap-2"><button class="btn btn-primary btn-xs">‚¨ÜÔ∏è Push</button> <button class="btn btn-error btn-xs btn-outline">üóëÔ∏è</button></div></div>'),$t=m('<div class="space-y-2"></div>'),ea=m('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">V1 Profiles</h1> <div> </div></div> <!> <!> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì° Current V1 Settings</h2> <!> <div class="card-actions justify-end gap-2"><!></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üíæ Saved Profiles</h2> <!></div></div> <div class="text-sm text-base-content/50"><p><strong>Pull:</strong> Read current V1 settings (shows in Current V1 Settings)</p> <p><strong>Edit:</strong> Modify settings and push directly to V1</p> <p><strong>Save:</strong> Store current V1 settings as a named profile</p> <p><strong>Push:</strong> Send a saved profile to your V1</p></div></div>');function va(Qe,Ue){Dt(Ue,!0);let H=F(Ct([])),y=F(null),je=F(!0),T=F(!1),d=F(null),E=F(!1),q=F(""),I=F(""),p=F(!1),j=F(null);Vt(async()=>{await Ke(),await Q()});async function Ke(){try{const r=await fetch("/api/v1/profiles");if(r.ok){const o=await r.json();n(H,o.profiles||[],!0)}}catch{console.error("Failed to fetch profiles")}finally{n(je,!1)}}async function Q(){try{const r=await fetch("/api/v1/current");if(r.ok){const o=await r.json();n(y,o,!0),n(T,o.connected||!1,!0)}}catch{n(T,!1)}}async function We(){n(d,{type:"info",text:"Pulling settings from V1..."},!0);try{(await fetch("/api/v1/pull",{method:"POST"})).ok?(n(d,{type:"success",text:"Settings pulled from V1"},!0),await Q(),n(E,!0),n(q,""),n(I,"")):n(d,{type:"error",text:"Failed to pull settings"},!0)}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function Ye(){if(!e(q).trim()){n(d,{type:"error",text:"Profile name required"},!0);return}if(!e(y)||!e(y).settings){n(d,{type:"error",text:"No settings to save"},!0);return}try{const r={name:e(q).trim(),description:e(I).trim(),settings:e(y).settings},o=await fetch("/api/v1/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(o.ok)n(d,{type:"success",text:`Profile "${e(q)}" saved`},!0),n(E,!1),await Ke();else{const v=await o.text();n(d,{type:"error",text:`Failed to save: ${v}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}function Ze(){e(y)&&e(y).settings&&(n(j,{...e(y).settings},!0),n(p,!0))}function $e(){n(j,null),n(p,!1)}async function et(){if(e(j)){n(d,{type:"info",text:"Pushing edited settings to V1..."},!0);try{const r={settings:e(j)},o=await fetch("/api/v1/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(o.ok)n(d,{type:"success",text:"Settings pushed to V1"},!0),e(y).settings=e(j),n(p,!1),n(j,null),await Q();else{const v=await o.text();n(d,{type:"error",text:`Failed to push: ${v}`},!0)}}catch(r){n(d,{type:"error",text:`Connection error: ${r.message}`},!0)}}}async function tt(r){n(d,{type:"info",text:`Pushing ${r} to V1...`},!0);try{const o=await fetch("/api/v1/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})});if(o.ok)n(d,{type:"success",text:`${r} pushed to V1`},!0),await Q();else{const v=await o.text();n(d,{type:"error",text:`Failed to push: ${v}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function at(r){if(confirm(`Delete profile "${r}"?`))try{(await fetch("/api/v1/profile/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})})).ok&&(n(H,e(H).filter(v=>v.name!==r),!0),n(d,{type:"success",text:"Profile deleted"},!0))}catch{n(d,{type:"error",text:"Failed to delete"},!0)}}var W=ea(),Y=i(W),Z=s(i(Y),2),st=i(Z,!0);l(Z),l(Y);var Ne=s(Y,2);{var lt=r=>{var o=Lt(),v=i(o),k=i(v,!0);l(v),l(o),M(()=>{Ge(o,1,`alert alert-${e(d).type==="error"?"error":e(d).type==="success"?"success":"info"}`),L(k,e(d).text)}),b(r,o)};P(Ne,r=>{e(d)&&r(lt)})}var qe=s(Ne,2);{var it=r=>{var o=jt(),v=i(o),k=s(i(v),2),O=i(k),h=s(i(O),2);_(h),l(O);var t=s(O,2),w=s(i(t),2);_(w),l(t),l(k);var S=s(k,2),C=i(S);C.__click=()=>n(E,!1);var R=s(C,2);R.__click=Ye,l(S),l(v),l(o),Ie(h,()=>e(q),V=>n(q,V)),Ie(w,()=>e(I),V=>n(I,V)),b(r,o)};P(qe,r=>{e(E)&&r(it)})}var $=s(qe,2),Ae=i($),Be=s(i(Ae),2);{var rt=r=>{var o=Kt();b(r,o)},ot=r=>{var o=ze(),v=G(o);{var k=h=>{const t=Mt(()=>e(p)?e(j):e(y).settings);var w=zt(),S=s(i(w),2),C=i(S);_(C),f(2),l(S);var R=s(S,2),V=i(R);_(V),f(2),l(R);var X=s(R,2),A=i(X);_(A),f(2),l(X);var J=s(X,2),B=i(J);_(B),f(2),l(J);var K=s(J,2),z=i(K);_(z),f(2),l(K);var ee=s(K,4),bt=s(i(ee),2);{var _t=a=>{var c=Nt(),u=i(c);u.value=u.__value=1;var g=s(u);g.value=g.__value=2;var D=s(g);D.value=D.__value=3,l(c),U(c,()=>e(t).kaSensitivity,N=>e(t).kaSensitivity=N),b(a,c)},ft=a=>{var c=qt(),u=i(c,!0);l(c),M(()=>L(u,e(t).kaSensitivity===3?"Full":e(t).kaSensitivity===2?"Original":"Relaxed")),b(a,c)};P(bt,a=>{e(p)?a(_t):a(ft,!1)})}l(ee);var te=s(ee,2),xt=s(i(te),2);{var mt=a=>{var c=At(),u=i(c);u.value=u.__value=1;var g=s(u);g.value=g.__value=2;var D=s(g);D.value=D.__value=3,l(c),U(c,()=>e(t).kSensitivity,N=>e(t).kSensitivity=N),b(a,c)},ht=a=>{var c=Bt(),u=i(c,!0);l(c),M(()=>L(u,e(t).kSensitivity===3?"Original":e(t).kSensitivity===2?"Full":"Relaxed")),b(a,c)};P(xt,a=>{e(p)?a(mt):a(ht,!1)})}l(te);var ae=s(te,2),gt=s(i(ae),2);{var yt=a=>{var c=Ht(),u=i(c);u.value=u.__value=1;var g=s(u);g.value=g.__value=2;var D=s(g);D.value=D.__value=3,l(c),U(c,()=>e(t).xSensitivity,N=>e(t).xSensitivity=N),b(a,c)},kt=a=>{var c=Et(),u=i(c,!0);l(c),M(()=>L(u,e(t).xSensitivity===3?"Original":e(t).xSensitivity===2?"Full":"Relaxed")),b(a,c)};P(gt,a=>{e(p)?a(yt):a(kt,!1)})}l(ae);var se=s(ae,4),St=s(i(se),2);{var wt=a=>{var c=Xt(),u=i(c);u.value=u.__value=1;var g=s(u);g.value=g.__value=2;var D=s(g);D.value=D.__value=3,l(c),U(c,()=>e(t).autoMute,N=>e(t).autoMute=N),b(a,c)},Pt=a=>{var c=Jt(),u=i(c,!0);l(c),M(()=>L(u,e(t).autoMute===3?"Off":e(t).autoMute===2?"Advanced":"On")),b(a,c)};P(St,a=>{e(p)?a(wt):a(Pt,!1)})}l(se);var le=s(se,2),ie=i(le);_(ie),f(2),l(le);var re=s(le,2),oe=i(re);_(oe),f(2),l(re);var ne=s(re,2),ce=i(ne);_(ce),f(2),l(ne);var pe=s(ne,2),ve=i(pe);_(ve),f(2),l(pe);var de=s(pe,2),ue=i(de);_(ue),f(2),l(de);var be=s(de,4),_e=i(be);_(_e),f(2),l(be);var fe=s(be,2),xe=i(fe);_(xe),f(2),l(fe);var me=s(fe,2),he=i(me);_(he),f(2),l(me);var ge=s(me,4),ye=i(ge);_(ye),f(2),l(ge);var ke=s(ge,2),Se=i(ke);_(Se),f(2),l(ke);var we=s(ke,2),Pe=i(we);_(Pe),f(2),l(we);var Ve=s(we,2),De=i(Ve);_(De),f(2),l(Ve);var Ce=s(Ve,2),Fe=i(Ce);_(Fe),f(2),l(Ce);var Me=s(Ce,2),Oe=i(Me);_(Oe),f(2),l(Me);var Re=s(Me,2),Te=i(Re);_(Te),f(2),l(Re);var Je=s(Re,2),Le=i(Je);_(Le),f(2),l(Je),l(w),M(()=>{C.disabled=!e(p),V.disabled=!e(p),A.disabled=!e(p),B.disabled=!e(p),z.disabled=!e(p),ie.disabled=!e(p),oe.disabled=!e(p),ce.disabled=!e(p),ve.disabled=!e(p),ue.disabled=!e(p),_e.disabled=!e(p),xe.disabled=!e(p),he.disabled=!e(p),ye.disabled=!e(p),Se.disabled=!e(p),Pe.disabled=!e(p),De.disabled=!e(p),Fe.disabled=!e(p),Oe.disabled=!e(p),Te.disabled=!e(p),Le.disabled=!e(p)}),x(C,()=>e(t).ka,a=>e(t).ka=a),x(V,()=>e(t).k,a=>e(t).k=a),x(A,()=>e(t).x,a=>e(t).x=a),x(B,()=>e(t).laser,a=>e(t).laser=a),x(z,()=>e(t).ku,a=>e(t).ku=a),x(ie,()=>e(t).kVerifier,a=>e(t).kVerifier=a),x(oe,()=>e(t).fastLaserDetect,a=>e(t).fastLaserDetect=a),x(ce,()=>e(t).laserRear,a=>e(t).laserRear=a),x(ve,()=>e(t).euroMode,a=>e(t).euroMode=a),x(ue,()=>e(t).mrct,a=>e(t).mrct=a),x(_e,()=>e(t).startupSequence,a=>e(t).startupSequence=a),x(xe,()=>e(t).restingDisplay,a=>e(t).restingDisplay=a),x(he,()=>e(t).bogeyLockLoud,a=>e(t).bogeyLockLoud=a),x(ye,()=>e(t).muteXKRear,a=>e(t).muteXKRear=a),x(Se,()=>e(t).kaAlwaysPriority,a=>e(t).kaAlwaysPriority=a),x(Pe,()=>e(t).muteToMuteVolume,a=>e(t).muteToMuteVolume=a),x(De,()=>e(t).customFreqs,a=>e(t).customFreqs=a),x(Fe,()=>e(t).bsmPlus,a=>e(t).bsmPlus=a),x(Oe,()=>e(t).driveSafe3D,a=>e(t).driveSafe3D=a),x(Te,()=>e(t).driveSafe3DHD,a=>e(t).driveSafe3DHD=a),x(Le,()=>e(t).redflexHalo,a=>e(t).redflexHalo=a),b(h,w)},O=h=>{var t=Gt();b(h,t)};P(v,h=>{e(y)&&e(y).settings?h(k):h(O,!1)},!0)}b(r,o)};P(Be,r=>{e(T)?r(ot,!1):r(rt)})}var He=s(Be,2),nt=i(He);{var ct=r=>{var o=It(),v=G(o);v.__click=$e;var k=s(v,2);k.__click=et,b(r,o)},pt=r=>{var o=Ut(),v=G(o);v.__click=We;var k=s(v,2);{var O=h=>{var t=Qt(),w=G(t);w.__click=Ze;var S=s(w,2);S.__click=()=>n(E,!0),M(()=>w.disabled=!e(T)),b(h,t)};P(k,h=>{e(y)&&e(y).settings&&h(O)})}M(()=>v.disabled=!e(T)),b(r,o)};P(nt,r=>{e(p)?r(ct):r(pt,!1)})}l(He),l(Ae),l($);var Ee=s($,2),Xe=i(Ee),vt=s(i(Xe),2);{var dt=r=>{var o=Wt();b(r,o)},ut=r=>{var o=ze(),v=G(o);{var k=h=>{var t=Yt();b(h,t)},O=h=>{var t=$t();Rt(t,21,()=>e(H),Tt,(w,S)=>{var C=Zt(),R=i(C),V=i(R),X=i(V,!0);l(V);var A=s(V,2),J=i(A,!0);l(A),l(R);var B=s(R,2),K=i(B);K.__click=()=>tt(e(S).name);var z=s(K,2);z.__click=()=>at(e(S).name),l(B),l(C),M(()=>{L(X,e(S).name),L(J,e(S).description||"No description"),K.disabled=!e(T)}),b(w,C)}),l(t),b(h,t)};P(v,h=>{e(H).length===0?h(k):h(O,!1)},!0)}b(r,o)};P(vt,r=>{e(je)?r(dt):r(ut,!1)})}l(Xe),l(Ee),f(2),l(W),M(()=>{Ge(Z,1,`badge ${e(T)?"badge-success":"badge-warning"}`),L(st,e(T)?"V1 Connected":"V1 Disconnected")}),b(Qe,W),Ft()}Ot(["click"]);export{va as component};
