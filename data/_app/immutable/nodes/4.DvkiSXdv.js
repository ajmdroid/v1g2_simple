import{f as m,a as u}from"../chunks/DazeWHNr.js";import{o as Gt}from"../chunks/BbGLgnJb.js";import{p as Ht,s as C,a as it,t as w,b as It,e as n,d as i,c as v,r as o,g as t,f as nt}from"../chunks/D7c9vuRB.js";import{d as Ut,s as S}from"../chunks/DhcWgYw3.js";import{i as h}from"../chunks/ClKWcuAI.js";import{e as lt,i as vt}from"../chunks/BwaEXe7N.js";import{r as z,s as qt,b as J}from"../chunks/D2rgAwxT.js";import{s as K}from"../chunks/CsEuG8qE.js";import{b as dt}from"../chunks/CVvGywVF.js";var zt=m("<div><span> </span></div>"),Jt=m('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),Kt=m('<input type="text" class="input input-bordered input-sm w-40"/>'),Qt=m('<h3 class="font-bold text-lg"> </h3>'),Rt=m('<span class="badge badge-primary badge-sm">Active</span>'),Wt=m('<button class="btn btn-success btn-sm">üíæ Save</button> <button class="btn btn-ghost btn-sm">Cancel</button>',1),Xt=m('<button class="btn btn-ghost btn-sm">‚úèÔ∏è</button>'),Yt=m("<option> </option>"),Zt=m(`<div class="grid grid-cols-2 gap-3 mt-3"><div class="form-control"><label class="label py-1"><span class="label-text text-xs">Profile</span></label> <select class="select select-bordered select-sm"><option>-- None --</option><!></select></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">V1 Mode</span></label> <select class="select select-bordered select-sm"><option>Don't Change</option><option>All Bogeys</option><option>Logic</option><option>Adv Logic</option></select></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">Volume (0-9)</span></label> <input type="number" class="input input-bordered input-sm" min="0" max="9"/></div> <div class="form-control"><label class="label py-1"><span class="label-text text-xs">Mute Volume (0-9)</span></label> <input type="number" class="input input-bordered input-sm" min="0" max="9"/></div></div>`),$t=m('<div class="grid grid-cols-2 gap-x-4 gap-y-1 text-sm mt-2"><div class="text-base-content/60">Profile:</div> <div class="font-medium"> </div> <div class="text-base-content/60">Mode:</div> <div class="font-medium"> </div> <div class="text-base-content/60">Volume:</div> <div class="font-medium"> </div></div>'),te=m('<button class="btn btn-outline btn-sm">Activate</button>'),ee=m('<div class="card-actions justify-end mt-3"><!> <button class="btn btn-primary btn-sm">‚¨ÜÔ∏è Push Now</button></div>'),ae=m('<div><div class="card-body p-4"><div class="flex justify-between items-start"><div class="flex items-center gap-3"><div class="text-3xl"> </div> <div><!> <!></div></div> <div class="flex gap-1"><!></div></div> <!> <!></div></div>'),se=m('<div class="alert alert-warning"><span>No saved profiles. Go to V1 Profiles to pull settings from your V1 first.</span></div>'),oe=m('<div class="grid gap-4"></div> <!>',1),re=m('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">Auto-Push Profiles</h1> <div> </div></div> <!> <div class="text-sm text-base-content/60 bg-base-200 p-3 rounded-lg"><p>Auto-Push automatically sends V1 settings when you connect. Configure 3 slots for different driving scenarios and switch between them with a touch.</p></div> <!></div>');function fe(ct,pt){Ht(pt,!0);let _=C(it({enabled:!1,activeSlot:0,slots:[]})),N=C(it([])),Q=C(!0),c=C(null),P=C(null);const ut={0:"Unknown",1:"All Bogeys",2:"Logic",3:"Adv Logic"},R=["Default","Highway","Comfort"],mt=["üè†","üèéÔ∏è","üë•"];Gt(async()=>{await Promise.all([ft(),_t()]),v(Q,!1)});async function ft(){try{const e=await fetch("/api/autopush/slots");e.ok&&v(_,await e.json(),!0)}catch{v(c,{type:"error",text:"Failed to load slots"},!0)}}async function _t(){try{const e=await fetch("/api/v1/profiles");if(e.ok){const r=await e.json();v(N,r.profiles||[],!0)}}catch{console.error("Failed to fetch profiles")}}async function bt(e){v(c,{type:"info",text:`Activating slot ${e}...`},!0);try{const r=new FormData;r.append("slot",e),r.append("enable","true"),(await fetch("/api/autopush/activate",{method:"POST",body:r})).ok?(t(_).activeSlot=e,t(_).enabled=!0,v(c,{type:"success",text:`Slot ${e} activated`},!0)):v(c,{type:"error",text:"Failed to activate"},!0)}catch{v(c,{type:"error",text:"Connection error"},!0)}}async function gt(e){v(c,{type:"info",text:"Pushing settings to V1..."},!0);try{const r=new FormData;r.append("slot",e);const l=await fetch("/api/autopush/push",{method:"POST",body:r});if(l.ok)v(c,{type:"success",text:"Settings pushed to V1!"},!0);else{const k=await l.json();v(c,{type:"error",text:k.error||"Push failed"},!0)}}catch{v(c,{type:"error",text:"Connection error"},!0)}}async function xt(e){const r=t(_).slots[e];v(c,{type:"info",text:"Saving slot..."},!0);try{const l=new FormData;l.append("slot",e),l.append("name",r.name),l.append("profile",r.profile),l.append("mode",r.mode),l.append("volume",r.volume),l.append("muteVol",r.muteVolume),(await fetch("/api/autopush/slot",{method:"POST",body:l})).ok?(v(c,{type:"success",text:"Slot saved!"},!0),v(P,null)):v(c,{type:"error",text:"Failed to save"},!0)}catch{v(c,{type:"error",text:"Connection error"},!0)}}var M=re(),L=i(M),O=n(i(L),2),yt=i(O,!0);o(O),o(L);var W=n(L,2);{var ht=e=>{var r=zt(),l=i(r),k=i(l,!0);o(l),o(r),w(()=>{K(r,1,`alert alert-${t(c).type==="error"?"error":t(c).type==="success"?"success":"info"}`),S(k,t(c).text)}),u(e,r)};h(W,e=>{t(c)&&e(ht)})}var wt=n(W,4);{var St=e=>{var r=Jt();u(e,r)},Pt=e=>{var r=oe(),l=nt(r);lt(l,21,()=>t(_).slots,vt,(A,d,f)=>{var F=ae(),X=i(F),T=i(X),B=i(T),E=i(B),kt=i(E,!0);o(E);var Y=n(E,2),Z=i(Y);{var At=a=>{var s=Kt();z(s),w(()=>qt(s,"placeholder",R[f])),J(s,()=>t(d).name,p=>t(d).name=p),u(a,s)},Dt=a=>{var s=Qt(),p=i(s,!0);o(s),w(()=>S(p,t(d).name||R[f])),u(a,s)};h(Z,a=>{t(P)===f?a(At):a(Dt,!1)})}var jt=n(Z,2);{var Ct=a=>{var s=Rt();u(a,s)};h(jt,a=>{t(_).activeSlot===f&&a(Ct)})}o(Y),o(B);var $=n(B,2),Ft=i($);{var Nt=a=>{var s=Wt(),p=nt(s);p.__click=()=>xt(f);var g=n(p,2);g.__click=()=>v(P,null),u(a,s)},Mt=a=>{var s=Xt();s.__click=()=>v(P,f,!0),u(a,s)};h(Ft,a=>{t(P)===f?a(Nt):a(Mt,!1)})}o($),o(T);var tt=n(T,2);{var Lt=a=>{var s=Zt(),p=i(s),g=n(i(p),2),b=i(g);b.value=b.__value="";var V=n(b);lt(V,17,()=>t(N),vt,(y,q)=>{var j=Yt(),Et=i(j,!0);o(j);var rt={};w(()=>{S(Et,t(q).name),rt!==(rt=t(q).name)&&(j.value=(j.__value=t(q).name)??"")}),u(y,j)}),o(g),o(p);var x=n(p,2),D=n(i(x),2),G=i(D);G.value=G.__value=0;var H=n(G);H.value=H.__value=1;var I=n(H);I.value=I.__value=2;var et=n(I);et.value=et.__value=3,o(D),o(x);var U=n(x,2),at=n(i(U),2);z(at),o(U);var st=n(U,2),ot=n(i(st),2);z(ot),o(st),o(s),dt(g,()=>t(d).profile,y=>t(d).profile=y),dt(D,()=>t(d).mode,y=>t(d).mode=y),J(at,()=>t(d).volume,y=>t(d).volume=y),J(ot,()=>t(d).muteVolume,y=>t(d).muteVolume=y),u(a,s)},Ot=a=>{var s=$t(),p=n(i(s),2),g=i(p,!0);o(p);var b=n(p,4),V=i(b,!0);o(b);var x=n(b,4),D=i(x);o(x),o(s),w(()=>{S(g,t(d).profile||"‚Äî"),S(V,ut[t(d).mode]||"‚Äî"),S(D,`${t(d).volume??""} / Mute: ${t(d).muteVolume??""}`)}),u(a,s)};h(tt,a=>{t(P)===f?a(Lt):a(Ot,!1)})}var Tt=n(tt,2);{var Bt=a=>{var s=ee(),p=i(s);{var g=V=>{var x=te();x.__click=()=>bt(f),u(V,x)};h(p,V=>{t(_).activeSlot!==f&&V(g)})}var b=n(p,2);b.__click=()=>gt(f),o(s),w(()=>b.disabled=!t(d).profile),u(a,s)};h(Tt,a=>{t(P)!==f&&a(Bt)})}o(X),o(F),w(()=>{K(F,1,`card bg-base-200 ${t(_).activeSlot===f?"ring-2 ring-primary":""}`),S(kt,mt[f])}),u(A,F)}),o(l);var k=n(l,2);{var Vt=A=>{var d=se();u(A,d)};h(k,A=>{t(N).length===0&&A(Vt)})}u(e,r)};h(wt,e=>{t(Q)?e(St):e(Pt,!1)})}o(M),w(()=>{K(O,1,`badge ${t(_).enabled?"badge-success":"badge-ghost"}`),S(yt,t(_).enabled?"Enabled":"Disabled")}),u(ct,M),It()}Ut(["click"]);export{fe as component};
