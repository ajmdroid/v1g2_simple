import{f as m,a as b,c as Ge}from"../chunks/BAToY3dM.js";import{o as Mt}from"../chunks/tgyn-xxr.js";import{p as Rt,s as O,a as Tt,t as M,b as jt,e as i,d as l,c as n,r,g as e,n as y,f as J,u as Lt}from"../chunks/fsS-m6VO.js";import{d as Et,s as j}from"../chunks/DKvjqhBm.js";import{i as P}from"../chunks/DGklRumq.js";import{e as Kt,i as Nt}from"../chunks/BzWd8bhm.js";import{r as f}from"../chunks/DtA2OqT-.js";import{s as Qe}from"../chunks/DOhhwrM8.js";import{b as Ke,a as h}from"../chunks/DQHpviRV.js";import{b as Y}from"../chunks/DnVtuXwL.js";var qt=m('<div role="status" aria-live="polite"><span> </span></div>'),At=m('<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg">ğŸ’¾ Save Profile</h3> <div class="py-4 space-y-4"><div class="form-control"><label class="label" for="profile-name"><span class="label-text">Profile Name</span></label> <input id="profile-name" type="text" placeholder="e.g., Highway, City, Custom" class="input input-bordered w-full"/></div> <div class="form-control"><label class="label" for="profile-description"><span class="label-text">Description (optional)</span></label> <input id="profile-description" type="text" placeholder="e.g., Max sensitivity for open roads" class="input input-bordered w-full"/></div></div> <div class="modal-action"><button class="btn btn-ghost">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),Bt=m('<div class="alert alert-info text-sm">Editing profile: <span class="font-semibold"> </span></div> <div class="form-control max-w-md"><label class="label" for="edit-description"><span class="label-text">Description</span></label> <input id="edit-description" type="text" placeholder="Update description" class="input input-bordered input-sm"/></div>',1),Ht=m('<p class="text-warning">Connect to V1 to view/edit settings</p>'),Jt=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Original</option><option>Full</option></select>'),Xt=m("<span> </span>"),Ut=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),It=m("<span> </span>"),zt=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),Gt=m("<span> </span>"),Qt=m('<select class="select select-bordered select-xs"><option>On</option><option>Advanced</option><option>Off</option></select>'),Wt=m("<span> </span>"),Yt=m('<div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"><div class="col-span-2 md:col-span-3 font-bold text-base">Band Detection</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>X Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ku Band</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Sensitivity</div> <div class="flex items-center gap-2"><span class="min-w-12">Ka:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">K:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">X:</span> <!></div> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Features</div> <div class="flex items-center gap-2"><span class="min-w-24">Auto Mute:</span> <!></div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Verifier (TMF)</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Fast Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Euro Mode</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>MRCT</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Display</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Startup Sequence</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Resting Display</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Bogey Lock Loud</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Advanced</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute X/K Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Always Priority</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute to Mute Vol</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Custom Freqs</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>BSM Plus</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D HD</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Redflex Halo</span></label></div>'),Zt=m('<p class="text-base-content/60">No settings available. Pull from V1 to view.</p>'),$t=m('<button class="btn btn-primary btn-sm">ğŸ’¾ Save Profile</button>'),ea=m('<button class="btn btn-ghost btn-sm">Cancel</button> <button class="btn btn-success btn-sm">âœ… Push to V1</button> <!>',1),ta=m('<button class="btn btn-secondary btn-sm">âœï¸ Edit</button> <button class="btn btn-success btn-sm">ğŸ’¾ Save</button>',1),aa=m('<button class="btn btn-primary btn-sm">â¬‡ï¸ Pull from V1</button> <!>',1),sa=m('<div class="flex justify-center p-4"><span class="loading loading-spinner"></span></div>'),ia=m('<p class="text-base-content/60">No saved profiles. Pull settings from V1 to create one.</p>'),ra=m('<div class="flex justify-between items-center p-3 bg-base-300 rounded-lg"><div><div class="font-medium"> </div> <div class="text-xs text-base-content/60"> </div></div> <div class="flex gap-2"><button class="btn btn-secondary btn-xs">âœï¸ Edit</button> <button class="btn btn-primary btn-xs">â¬†ï¸ Push</button> <button class="btn btn-error btn-xs btn-outline">ğŸ—‘ï¸</button></div></div>'),la=m('<div class="space-y-2"></div>'),na=m('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">V1 Profiles</h1> <div> </div></div> <!> <!> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">ğŸ“¡ Current V1 Settings</h2> <!> <!> <div class="card-actions justify-end gap-2"><!></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">ğŸ’¾ Saved Profiles</h2> <!></div></div> <div class="text-sm text-base-content/50"><p><strong>Pull:</strong> Read current V1 settings (shows in Current V1 Settings)</p> <p><strong>Edit:</strong> Modify settings and push directly to V1</p> <p><strong>Save:</strong> Store current V1 settings as a named profile</p> <p><strong>Push:</strong> Send a saved profile to your V1</p></div></div>');function ma(We,Ye){Rt(Ye,!0);let X=O(Tt([])),_=O(null),Ne=O(!0),L=O(!1),d=O(null),U=O(!1),N=O(""),W=O(""),v=O(!1),C=O(null),q=O("");Mt(async()=>{await Z(),await I()});async function Z(){try{const s=await fetch("/api/v1/profiles");if(s.ok){const o=await s.json();n(X,o.profiles||[],!0)}}catch{console.error("Failed to fetch profiles")}finally{n(Ne,!1)}}async function I(){try{const s=await fetch("/api/v1/current");if(s.ok){const o=await s.json();n(_,o,!0),n(L,o.connected||!1,!0)}}catch{n(L,!1)}}async function Ze(){n(d,{type:"info",text:"Pulling settings from V1..."},!0);try{(await fetch("/api/v1/pull",{method:"POST"})).ok?(n(d,{type:"success",text:"Settings pulled from V1"},!0),await I(),n(U,!0),n(N,""),n(W,"")):n(d,{type:"error",text:"Failed to pull settings"},!0)}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function $e(){if(!e(N).trim()){n(d,{type:"error",text:"Profile name required"},!0);return}if(!e(_)||!e(_).settings){n(d,{type:"error",text:"No settings to save"},!0);return}try{const s={name:e(N).trim(),description:e(W).trim(),settings:e(_).settings},o=await fetch("/api/v1/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(o.ok)n(d,{type:"success",text:`Profile "${e(N)}" saved`},!0),n(U,!1),await Z();else{const c=await o.text();n(d,{type:"error",text:`Failed to save: ${c}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}function et(){e(_)&&e(_).settings&&(n(C,{...e(_).settings},!0),n(q,e(_).description||"",!0),n(v,!0))}function tt(){n(C,null),n(q,""),n(v,!1)}async function at(s){n(d,{type:"info",text:`Loading ${s}...`},!0);try{const o=await fetch(`/api/v1/profile?name=${encodeURIComponent(s)}`);if(o.ok){const c=await o.json();n(_,c,!0),n(C,{...c.settings},!0),n(q,c.description||"",!0),n(v,!0),n(d,{type:"info",text:`Editing ${s}`},!0)}else{const c=await o.text();n(d,{type:"error",text:`Failed to load: ${c}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function st(){if(!e(C)||!e(_)||!e(_).name){n(d,{type:"error",text:"No profile loaded to save"},!0);return}n(d,{type:"info",text:`Saving ${e(_).name}...`},!0);try{const s={name:e(_).name,description:e(q).trim(),settings:e(C)},o=await fetch("/api/v1/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(o.ok)n(d,{type:"success",text:`Profile "${e(_).name}" saved`},!0),n(v,!1),n(C,null),await Z(),await I();else{const c=await o.text();n(d,{type:"error",text:`Failed to save: ${c}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function it(){if(e(C)){n(d,{type:"info",text:"Pushing edited settings to V1..."},!0);try{const s={settings:e(C)},o=await fetch("/api/v1/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(o.ok)n(d,{type:"success",text:"Settings pushed to V1"},!0),e(_).settings=e(C),n(v,!1),n(C,null),await I();else{const c=await o.text();n(d,{type:"error",text:`Failed to push: ${c}`},!0)}}catch(s){n(d,{type:"error",text:`Connection error: ${s.message}`},!0)}}}async function rt(s){n(d,{type:"info",text:`Pushing ${s} to V1...`},!0);try{const o=await fetch("/api/v1/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s})});if(o.ok)n(d,{type:"success",text:`${s} pushed to V1`},!0),await I();else{const c=await o.text();n(d,{type:"error",text:`Failed to push: ${c}`},!0)}}catch{n(d,{type:"error",text:"Connection error"},!0)}}async function lt(s){if(confirm(`Delete profile "${s}"?`))try{(await fetch("/api/v1/profile/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s})})).ok&&(n(X,e(X).filter(c=>c.name!==s),!0),n(d,{type:"success",text:"Profile deleted"},!0))}catch{n(d,{type:"error",text:"Failed to delete"},!0)}}var $=na(),ee=l($),te=i(l(ee),2),nt=l(te,!0);r(te),r(ee);var qe=i(ee,2);{var ot=s=>{var o=qt(),c=l(o),k=l(c,!0);r(c),r(o),M(()=>{Qe(o,1,`alert alert-${e(d).type==="error"?"error":e(d).type==="success"?"success":"info"}`),j(k,e(d).text)}),b(s,o)};P(qe,s=>{e(d)&&s(ot)})}var Ae=i(qe,2);{var ct=s=>{var o=At(),c=l(o),k=i(l(c),2),V=l(k),u=i(l(V),2);f(u),r(V);var t=i(V,2),g=i(l(t),2);f(g),r(t),r(k);var w=i(k,2),R=l(w);R.__click=()=>n(U,!1);var T=i(R,2);T.__click=$e,r(w),r(c),r(o),Ke(u,()=>e(N),D=>n(N,D)),Ke(g,()=>e(W),D=>n(W,D)),b(s,o)};P(Ae,s=>{e(U)&&s(ct)})}var ae=i(Ae,2),Be=l(ae),He=i(l(Be),2);{var pt=s=>{var o=Bt(),c=J(o),k=i(l(c)),V=l(k,!0);r(k),r(c);var u=i(c,2),t=i(l(u),2);f(t),r(u),M(()=>j(V,e(_).name)),Ke(t,()=>e(q),g=>n(q,g)),b(s,o)};P(He,s=>{var o;e(v)&&((o=e(_))!=null&&o.name)&&s(pt)})}var Je=i(He,2);{var vt=s=>{var o=Ht();b(s,o)},dt=s=>{var o=Ge(),c=J(o);{var k=u=>{const t=Lt(()=>e(v)?e(C):e(_).settings);var g=Yt(),w=i(l(g),2),R=l(w);f(R),y(2),r(w);var T=i(w,2),D=l(T);f(D),y(2),r(T);var z=i(T,2),A=l(z);f(A),y(2),r(z);var G=i(z,2),B=l(G);f(B),y(2),r(G);var H=i(G,2),E=l(H);f(E),y(2),r(H);var Q=i(H,4),yt=i(l(Q),2);{var ht=a=>{var p=Jt(),x=l(p);x.value=x.__value=1;var S=i(x);S.value=S.__value=2;var F=i(S);F.value=F.__value=3,r(p),Y(p,()=>e(t).kaSensitivity,K=>e(t).kaSensitivity=K),b(a,p)},gt=a=>{var p=Xt(),x=l(p,!0);r(p),M(()=>j(x,e(t).kaSensitivity===3?"Full":e(t).kaSensitivity===2?"Original":"Relaxed")),b(a,p)};P(yt,a=>{e(v)?a(ht):a(gt,!1)})}r(Q);var se=i(Q,2),kt=i(l(se),2);{var St=a=>{var p=Ut(),x=l(p);x.value=x.__value=1;var S=i(x);S.value=S.__value=2;var F=i(S);F.value=F.__value=3,r(p),Y(p,()=>e(t).kSensitivity,K=>e(t).kSensitivity=K),b(a,p)},wt=a=>{var p=It(),x=l(p,!0);r(p),M(()=>j(x,e(t).kSensitivity===3?"Original":e(t).kSensitivity===2?"Full":"Relaxed")),b(a,p)};P(kt,a=>{e(v)?a(St):a(wt,!1)})}r(se);var ie=i(se,2),Pt=i(l(ie),2);{var Vt=a=>{var p=zt(),x=l(p);x.value=x.__value=1;var S=i(x);S.value=S.__value=2;var F=i(S);F.value=F.__value=3,r(p),Y(p,()=>e(t).xSensitivity,K=>e(t).xSensitivity=K),b(a,p)},Ct=a=>{var p=Gt(),x=l(p,!0);r(p),M(()=>j(x,e(t).xSensitivity===3?"Original":e(t).xSensitivity===2?"Full":"Relaxed")),b(a,p)};P(Pt,a=>{e(v)?a(Vt):a(Ct,!1)})}r(ie);var re=i(ie,4),Dt=i(l(re),2);{var Ft=a=>{var p=Qt(),x=l(p);x.value=x.__value=1;var S=i(x);S.value=S.__value=2;var F=i(S);F.value=F.__value=3,r(p),Y(p,()=>e(t).autoMute,K=>e(t).autoMute=K),b(a,p)},Ot=a=>{var p=Wt(),x=l(p,!0);r(p),M(()=>j(x,e(t).autoMute===3?"Off":e(t).autoMute===2?"Advanced":"On")),b(a,p)};P(Dt,a=>{e(v)?a(Ft):a(Ot,!1)})}r(re);var le=i(re,2),ne=l(le);f(ne),y(2),r(le);var oe=i(le,2),ce=l(oe);f(ce),y(2),r(oe);var pe=i(oe,2),ve=l(pe);f(ve),y(2),r(pe);var de=i(pe,2),ue=l(de);f(ue),y(2),r(de);var be=i(de,2),fe=l(be);f(fe),y(2),r(be);var _e=i(be,4),xe=l(_e);f(xe),y(2),r(_e);var me=i(_e,2),ye=l(me);f(ye),y(2),r(me);var he=i(me,2),ge=l(he);f(ge),y(2),r(he);var ke=i(he,4),Se=l(ke);f(Se),y(2),r(ke);var we=i(ke,2),Pe=l(we);f(Pe),y(2),r(we);var Ve=i(we,2),Ce=l(Ve);f(Ce),y(2),r(Ve);var De=i(Ve,2),Fe=l(De);f(Fe),y(2),r(De);var Oe=i(De,2),Me=l(Oe);f(Me),y(2),r(Oe);var Re=i(Oe,2),Te=l(Re);f(Te),y(2),r(Re);var je=i(Re,2),Le=l(je);f(Le),y(2),r(je);var ze=i(je,2),Ee=l(ze);f(Ee),y(2),r(ze),r(g),M(()=>{R.disabled=!e(v),D.disabled=!e(v),A.disabled=!e(v),B.disabled=!e(v),E.disabled=!e(v),ne.disabled=!e(v),ce.disabled=!e(v),ve.disabled=!e(v),ue.disabled=!e(v),fe.disabled=!e(v),xe.disabled=!e(v),ye.disabled=!e(v),ge.disabled=!e(v),Se.disabled=!e(v),Pe.disabled=!e(v),Ce.disabled=!e(v),Fe.disabled=!e(v),Me.disabled=!e(v),Te.disabled=!e(v),Le.disabled=!e(v),Ee.disabled=!e(v)}),h(R,()=>e(t).ka,a=>e(t).ka=a),h(D,()=>e(t).k,a=>e(t).k=a),h(A,()=>e(t).x,a=>e(t).x=a),h(B,()=>e(t).laser,a=>e(t).laser=a),h(E,()=>e(t).ku,a=>e(t).ku=a),h(ne,()=>e(t).kVerifier,a=>e(t).kVerifier=a),h(ce,()=>e(t).fastLaserDetect,a=>e(t).fastLaserDetect=a),h(ve,()=>e(t).laserRear,a=>e(t).laserRear=a),h(ue,()=>e(t).euroMode,a=>e(t).euroMode=a),h(fe,()=>e(t).mrct,a=>e(t).mrct=a),h(xe,()=>e(t).startupSequence,a=>e(t).startupSequence=a),h(ye,()=>e(t).restingDisplay,a=>e(t).restingDisplay=a),h(ge,()=>e(t).bogeyLockLoud,a=>e(t).bogeyLockLoud=a),h(Se,()=>e(t).muteXKRear,a=>e(t).muteXKRear=a),h(Pe,()=>e(t).kaAlwaysPriority,a=>e(t).kaAlwaysPriority=a),h(Ce,()=>e(t).muteToMuteVolume,a=>e(t).muteToMuteVolume=a),h(Fe,()=>e(t).customFreqs,a=>e(t).customFreqs=a),h(Me,()=>e(t).bsmPlus,a=>e(t).bsmPlus=a),h(Te,()=>e(t).driveSafe3D,a=>e(t).driveSafe3D=a),h(Le,()=>e(t).driveSafe3DHD,a=>e(t).driveSafe3DHD=a),h(Ee,()=>e(t).redflexHalo,a=>e(t).redflexHalo=a),b(u,g)},V=u=>{var t=Zt();b(u,t)};P(c,u=>{e(_)&&e(_).settings?u(k):u(V,!1)},!0)}b(s,o)};P(Je,s=>{!e(L)&&!e(v)?s(vt):s(dt,!1)})}var Xe=i(Je,2),ut=l(Xe);{var bt=s=>{var o=ea(),c=J(o);c.__click=tt;var k=i(c,2);k.__click=it;var V=i(k,2);{var u=t=>{var g=$t();g.__click=st,b(t,g)};P(V,t=>{var g;(g=e(_))!=null&&g.name&&t(u)})}b(s,o)},ft=s=>{var o=aa(),c=J(o);c.__click=Ze;var k=i(c,2);{var V=u=>{var t=ta(),g=J(t);g.__click=et;var w=i(g,2);w.__click=()=>n(U,!0),M(()=>g.disabled=!e(L)),b(u,t)};P(k,u=>{e(_)&&e(_).settings&&u(V)})}M(()=>c.disabled=!e(L)),b(s,o)};P(ut,s=>{e(v)?s(bt):s(ft,!1)})}r(Xe),r(Be),r(ae);var Ue=i(ae,2),Ie=l(Ue),_t=i(l(Ie),2);{var xt=s=>{var o=sa();b(s,o)},mt=s=>{var o=Ge(),c=J(o);{var k=u=>{var t=ia();b(u,t)},V=u=>{var t=la();Kt(t,21,()=>e(X),Nt,(g,w)=>{var R=ra(),T=l(R),D=l(T),z=l(D,!0);r(D);var A=i(D,2),G=l(A,!0);r(A),r(T);var B=i(T,2),H=l(B);H.__click=()=>at(e(w).name);var E=i(H,2);E.__click=()=>rt(e(w).name);var Q=i(E,2);Q.__click=()=>lt(e(w).name),r(B),r(R),M(()=>{j(z,e(w).name),j(G,e(w).description||"No description"),E.disabled=!e(L)}),b(g,R)}),r(t),b(u,t)};P(c,u=>{e(X).length===0?u(k):u(V,!1)},!0)}b(s,o)};P(_t,s=>{e(Ne)?s(xt):s(mt,!1)})}r(Ie),r(Ue),y(2),r($),M(()=>{Qe(te,1,`badge ${e(L)?"badge-success":"badge-warning"}`),j(nt,e(L)?"V1 Connected":"V1 Disconnected")}),b(We,$),jt()}Et(["click"]);export{ma as component};
