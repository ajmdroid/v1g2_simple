import{f as _,a as n,c as U,t as V}from"../chunks/U3VcC_BH.js";import{o as Tt}from"../chunks/kg85IUNc.js";import{p as Xt,s as L,a as jt,u as Et,d as r,e as s,c as o,t as w,b as qt,r as e,g as t,f as D,h as zt}from"../chunks/BaBLp7YP.js";import{d as Bt,s as p}from"../chunks/k6lnPJFt.js";import{i as k}from"../chunks/B27jU-Np.js";import{e as ot,i as it}from"../chunks/Nfi6ovxQ.js";import{s as b}from"../chunks/CJZ8LQ5g.js";var Mt=_('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),Ht=_('<div class="alert alert-error"><span> </span></div>'),Nt=_('<div class="card bg-base-200"><div class="card-body text-center"><p class="text-base-content/60">No alerts recorded</p></div></div>'),Ot=_("<div></div>"),Pt=_('<tr><td><div class="text-sm"> </div> <div class="text-xs text-base-content/50"> </div></td><td><span> </span></td><td> </td><td><div class="flex items-center gap-1"></div></td><td><!></td></tr>'),Gt=_('<div class="overflow-x-auto"><table class="table table-zebra"><thead><tr><th>Time</th><th>Band</th><th>Frequency</th><th>Strength</th><th>Direction</th></tr></thead><tbody></tbody></table></div> <div class="text-sm text-base-content/50 text-center"> </div>',1),It=_('<div class="space-y-4"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">Alert Log</h1> <div class="flex gap-2"><button class="btn btn-sm btn-outline">üîÑ Refresh</button> <button class="btn btn-sm btn-error btn-outline">üóëÔ∏è Clear</button></div></div> <div class="tabs tabs-boxed bg-base-200"><button>All</button> <button>Ka</button> <button>K</button> <button>X</button> <button>Laser</button></div> <!></div>');function $t(lt,vt){Xt(vt,!0);let x=L(jt([])),R=L(!0),f=L(null),i=L("all");Tt(async()=>{await W()});async function W(){o(R,!0);try{const a=await fetch("/api/alerts");if(a.ok){const v=await a.json();o(x,v.alerts||[],!0),o(f,null)}else o(f,"Failed to load alerts")}catch{o(f,"Connection error")}finally{o(R,!1)}}async function dt(){if(confirm("Clear all alerts from the log?"))try{await fetch("/api/alerts/clear",{method:"POST"}),o(x,[],!0)}catch{o(f,"Failed to clear")}}function ct(a){switch(a){case"Ka":return"badge-error";case"K":return"badge-warning";case"X":return"badge-info";case"LASER":return"badge-secondary";default:return"badge-ghost"}}function bt(a){return a?new Date(a*1e3).toLocaleTimeString():""}function _t(a){return a?new Date(a*1e3).toLocaleDateString():""}Et(()=>{});let C=zt(()=>t(i)==="all"?t(x):t(x).filter(a=>a.band===t(i)));var F=It(),T=r(F),Y=s(r(T),2),Z=r(Y);Z.__click=W;var ft=s(Z,2);ft.__click=dt,e(Y),e(T);var X=s(T,2),j=r(X);j.__click=()=>o(i,"all");var E=s(j,2);E.__click=()=>o(i,"Ka");var q=s(E,2);q.__click=()=>o(i,"K");var z=s(q,2);z.__click=()=>o(i,"X");var $=s(z,2);$.__click=()=>o(i,"LASER"),e(X);var ut=s(X,2);{var gt=a=>{var v=Mt();n(a,v)},mt=a=>{var v=U(),ht=D(v);{var pt=u=>{var g=Ht(),A=r(g),B=r(A,!0);e(A),e(g),w(()=>p(B,t(f))),n(u,g)},xt=u=>{var g=U(),A=D(g);{var B=m=>{var S=Nt();n(m,S)},yt=m=>{var S=Gt(),M=D(S),tt=r(M),at=s(r(tt));ot(at,21,()=>t(C),it,(kt,d)=>{var H=Pt(),N=r(H),O=r(N),At=r(O,!0);e(O);var rt=s(O,2),St=r(rt,!0);e(rt),e(N);var P=s(N),G=r(P),Kt=r(G,!0);e(G),e(P);var I=s(P),Lt=r(I);e(I);var J=s(I),st=r(J);ot(st,20,()=>Array(8),it,(l,c,y)=>{var K=Ot();w(()=>b(K,1,`w-2 h-4 rounded ${y<t(d).strength?"bg-primary":"bg-base-300"}`)),n(l,K)}),e(st),e(J);var nt=s(J),Dt=r(nt);{var Rt=l=>{var c=V("‚¨ÜÔ∏è Front");n(l,c)},Ct=l=>{var c=U(),y=D(c);{var K=h=>{var Q=V("‚¨áÔ∏è Rear");n(h,Q)},Ft=h=>{var Q=V("‚ÜîÔ∏è Side");n(h,Q)};k(y,h=>{t(d).direction===1?h(K):h(Ft,!1)},!0)}n(l,c)};k(Dt,l=>{t(d).direction===0?l(Rt):l(Ct,!1)})}e(nt),e(H),w((l,c,y)=>{p(At,l),p(St,c),b(G,1,`badge ${y??""}`),p(Kt,t(d).band),p(Lt,`${t(d).frequency??""} MHz`)},[()=>bt(t(d).timestamp),()=>_t(t(d).timestamp),()=>ct(t(d).band)]),n(kt,H)}),e(at),e(tt),e(M);var et=s(M,2),wt=r(et);e(et),w(()=>p(wt,`Showing ${t(C).length??""} of ${t(x).length??""} alerts`)),n(m,S)};k(A,m=>{t(C).length===0?m(B):m(yt,!1)},!0)}n(u,g)};k(ht,u=>{t(f)?u(pt):u(xt,!1)},!0)}n(a,v)};k(ut,a=>{t(R)?a(gt):a(mt,!1)})}e(F),w(()=>{b(j,1,`tab ${t(i)==="all"?"tab-active":""}`),b(E,1,`tab ${t(i)==="Ka"?"tab-active":""}`),b(q,1,`tab ${t(i)==="K"?"tab-active":""}`),b(z,1,`tab ${t(i)==="X"?"tab-active":""}`),b($,1,`tab ${t(i)==="LASER"?"tab-active":""}`)}),n(lt,F),qt()}Bt(["click"]);export{$t as component};
