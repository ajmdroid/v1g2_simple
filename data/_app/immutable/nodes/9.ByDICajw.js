import{f as u,a as v}from"../chunks/BAToY3dM.js";import{o as oa}from"../chunks/tgyn-xxr.js";import{p as la,s as g,a as na,b as da,e,d as i,c as d,g as a,r,t as K,f as pa,n as ca}from"../chunks/fsS-m6VO.js";import{d as va,s as ua}from"../chunks/DKvjqhBm.js";import{i as j}from"../chunks/DGklRumq.js";import{r as c}from"../chunks/DtA2OqT-.js";import{s as _a}from"../chunks/DOhhwrM8.js";import{b as h,c as O}from"../chunks/DQHpviRV.js";var fa=u('<div role="status" aria-live="polite"><span> </span></div>'),ba=u('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),ma=u('<span class="loading loading-spinner loading-sm"></span>'),wa=u('<div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì∂ WiFi Network</h2> <p class="text-sm text-base-content/60">Connect to your home/car WiFi network</p> <div class="form-control"><label class="label" for="wifi-ssid"><span class="label-text">Network Name (SSID)</span></label> <input id="wifi-ssid" type="text" class="input input-bordered" placeholder="Your WiFi network"/></div> <div class="form-control"><label class="label" for="wifi-password"><span class="label-text">Password</span></label> <input id="wifi-password" type="password" class="input input-bordered" placeholder="WiFi password"/></div> <button class="btn btn-outline btn-sm mt-2">üîç Scan Networks</button></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì° Access Point</h2> <p class="text-sm text-base-content/60">The WiFi network this device broadcasts</p> <div class="form-control"><label class="label" for="ap-ssid"><span class="label-text">AP Name</span></label> <input id="ap-ssid" type="text" class="input input-bordered" placeholder="V1G2-Display"/></div> <div class="form-control"><label class="label" for="ap-password"><span class="label-text">AP Password</span></label> <input id="ap-password" type="password" class="input input-bordered" placeholder="At least 8 characters"/></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üîß WiFi Mode</h2> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP Only (creates hotspot)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">Station Only (connects to network)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP + Station (recommended)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div></div></div> <button class="btn btn-primary btn-block"><!> Save Settings</button>',1),ya=u('<div class="space-y-6"><h1 class="text-2xl font-bold">Settings</h1> <!> <!></div>');function Aa(L,Q){la(Q,!0);const x=[];let t=g(na({ssid:"",password:"",ap_ssid:"",ap_password:"",wifi_mode:2})),C=g(!0),_=g(!1),n=g(null);oa(async()=>{await R()});async function R(){try{const s=await fetch("/api/settings");if(s.ok){const l=await s.json();d(t,{...a(t),...l},!0)}}catch{d(n,{type:"error",text:"Failed to load settings"},!0)}finally{d(C,!1)}}async function U(){d(_,!0),d(n,null);try{const s=new FormData;s.append("ssid",a(t).ssid),s.append("password",a(t).password),s.append("ap_ssid",a(t).ap_ssid),s.append("ap_password",a(t).ap_password),s.append("wifi_mode",a(t).wifi_mode),(await fetch("/settings",{method:"POST",body:s})).ok?d(n,{type:"success",text:"Settings saved! WiFi will restart."},!0):d(n,{type:"error",text:"Failed to save settings"},!0)}catch{d(n,{type:"error",text:"Connection error"},!0)}finally{d(_,!1)}}async function X(){var s;d(n,{type:"info",text:"Scanning for networks..."},!0);try{const l=await fetch("/api/scan");if(l.ok){const p=await l.json();d(n,{type:"success",text:`Found ${((s=p.networks)==null?void 0:s.length)||0} networks`},!0)}}catch{d(n,{type:"error",text:"Scan failed"},!0)}}var k=ya(),M=e(i(k),2);{var Z=s=>{var l=fa(),p=i(l),f=i(p,!0);r(p),r(l),K(()=>{_a(l,1,`alert alert-${a(n).type==="error"?"error":a(n).type==="success"?"success":"info"}`),ua(f,a(n).text)}),v(s,l)};j(M,s=>{a(n)&&s(Z)})}var $=e(M,2);{var aa=s=>{var l=ba();v(s,l)},sa=s=>{var l=wa(),p=pa(l),f=i(p),S=e(i(f),4),T=e(i(S),2);c(T),r(S);var F=e(S,2),G=e(i(F),2);c(G),r(F);var ta=e(F,2);ta.__click=X,r(f),r(p);var P=e(p,2),I=i(P),W=e(i(I),4),V=e(i(W),2);c(V),r(W);var Y=e(W,2),q=e(i(Y),2);c(q),r(Y),r(I),r(P);var A=e(P,2),z=i(A),N=e(i(z),2),B=i(N),b=e(i(B),2);c(b),b.value=b.__value=0,r(B),r(N);var D=e(N,2),E=i(D),m=e(i(E),2);c(m),m.value=m.__value=1,r(E),r(D);var H=e(D,2),J=i(H),w=e(i(J),2);c(w),w.value=w.__value=2,r(J),r(H),r(z),r(A);var y=e(A,2);y.__click=U;var ea=i(y);{var ia=o=>{var ra=ma();v(o,ra)};j(ea,o=>{a(_)&&o(ia)})}ca(),r(y),K(()=>y.disabled=a(_)),h(T,()=>a(t).ssid,o=>a(t).ssid=o),h(G,()=>a(t).password,o=>a(t).password=o),h(V,()=>a(t).ap_ssid,o=>a(t).ap_ssid=o),h(q,()=>a(t).ap_password,o=>a(t).ap_password=o),O(x,[],b,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),O(x,[],m,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),O(x,[],w,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),v(s,l)};j($,s=>{a(C)?s(aa):s(sa,!1)})}r(k),v(L,k),da()}va(["click"]);export{Aa as component};
