import{f as m,a as u,c as ze}from"../chunks/BAToY3dM.js";import{o as Vt}from"../chunks/tgyn-xxr.js";import{p as Dt,s as C,a as Ft,t as M,b as Ct,e as s,d as i,c as n,r as l,g as e,n as f,f as G,u as Mt}from"../chunks/fsS-m6VO.js";import{d as Ot,s as L}from"../chunks/DKvjqhBm.js";import{i as P}from"../chunks/DGklRumq.js";import{e as Rt,i as Tt}from"../chunks/BzWd8bhm.js";import{r as b}from"../chunks/DtA2OqT-.js";import{s as Ge}from"../chunks/DOhhwrM8.js";import{b as Ie,a as x}from"../chunks/DQHpviRV.js";import{b as U}from"../chunks/DnVtuXwL.js";var Lt=m('<div role="status" aria-live="polite"><span> </span></div>'),Kt=m('<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg">üíæ Save Profile</h3> <div class="py-4 space-y-4"><div class="form-control"><label class="label" for="profile-name"><span class="label-text">Profile Name</span></label> <input id="profile-name" type="text" placeholder="e.g., Highway, City, Custom" class="input input-bordered w-full"/></div> <div class="form-control"><label class="label" for="profile-description"><span class="label-text">Description (optional)</span></label> <input id="profile-description" type="text" placeholder="e.g., Max sensitivity for open roads" class="input input-bordered w-full"/></div></div> <div class="modal-action"><button class="btn btn-ghost">Cancel</button> <button class="btn btn-primary">Save</button></div></div></div>'),jt=m('<p class="text-warning">Connect to V1 to view/edit settings</p>'),qt=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Original</option><option>Full</option></select>'),At=m("<span> </span>"),Bt=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),Ht=m("<span> </span>"),Et=m('<select class="select select-bordered select-xs"><option>Relaxed</option><option>Full</option><option>Original</option></select>'),Nt=m("<span> </span>"),Xt=m('<select class="select select-bordered select-xs"><option>On</option><option>Advanced</option><option>Off</option></select>'),Jt=m("<span> </span>"),zt=m('<div class="grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"><div class="col-span-2 md:col-span-3 font-bold text-base">Band Detection</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>X Band</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ku Band</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Sensitivity</div> <div class="flex items-center gap-2"><span class="min-w-12">Ka:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">K:</span> <!></div> <div class="flex items-center gap-2"><span class="min-w-12">X:</span> <!></div> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Features</div> <div class="flex items-center gap-2"><span class="min-w-24">Auto Mute:</span> <!></div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>K Verifier (TMF)</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Fast Laser</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Laser Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Euro Mode</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>MRCT</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Display</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Startup Sequence</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Resting Display</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Bogey Lock Loud</span></label> <div class="col-span-2 md:col-span-3 font-bold text-base mt-2">Advanced</div> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute X/K Rear</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Ka Always Priority</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Mute to Mute Vol</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Custom Freqs</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>BSM Plus</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Drive Safe 3D HD</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="checkbox checkbox-sm"/> <span>Redflex Halo</span></label></div>'),Gt=m('<p class="text-base-content/60">No settings available. Pull from V1 to view.</p>'),It=m('<button class="btn btn-ghost btn-sm">Cancel</button> <button class="btn btn-success btn-sm">‚úÖ Push to V1</button>',1),Qt=m('<button class="btn btn-secondary btn-sm">‚úèÔ∏è Edit</button> <button class="btn btn-success btn-sm">üíæ Save</button>',1),Ut=m('<button class="btn btn-primary btn-sm">‚¨áÔ∏è Pull from V1</button> <!>',1),Wt=m('<div class="flex justify-center p-4"><span class="loading loading-spinner"></span></div>'),Yt=m('<p class="text-base-content/60">No saved profiles. Pull settings from V1 to create one.</p>'),Zt=m('<div class="flex justify-between items-center p-3 bg-base-300 rounded-lg"><div><div class="font-medium"> </div> <div class="text-xs text-base-content/60"> </div></div> <div class="flex gap-2"><button class="btn btn-primary btn-xs">‚¨ÜÔ∏è Push</button> <button class="btn btn-error btn-xs btn-outline">üóëÔ∏è</button></div></div>'),$t=m('<div class="space-y-2"></div>'),ea=m('<div class="space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-bold">V1 Profiles</h1> <div> </div></div> <!> <!> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì° Current V1 Settings</h2> <!> <div class="card-actions justify-end gap-2"><!></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üíæ Saved Profiles</h2> <!></div></div> <div class="text-sm text-base-content/50"><p><strong>Pull:</strong> Read current V1 settings (shows in Current V1 Settings)</p> <p><strong>Edit:</strong> Modify settings and push directly to V1</p> <p><strong>Save:</strong> Store current V1 settings as a named profile</p> <p><strong>Push:</strong> Send a saved profile to your V1</p></div></div>');function va(Qe,Ue){Dt(Ue,!0);let E=C(Ft([])),k=C(null),Ke=C(!0),T=C(!1),v=C(null),N=C(!1),A=C(""),I=C(""),p=C(!1),K=C(null);Vt(async()=>{await je(),await Q()});async function je(){try{const r=await fetch("/api/v1/profiles");if(r.ok){const o=await r.json();n(E,o.profiles||[],!0)}}catch{console.error("Failed to fetch profiles")}finally{n(Ke,!1)}}async function Q(){try{const r=await fetch("/api/v1/current");if(r.ok){const o=await r.json();n(k,o,!0),n(T,o.connected||!1,!0)}}catch{n(T,!1)}}async function We(){n(v,{type:"info",text:"Pulling settings from V1..."},!0);try{(await fetch("/api/v1/pull",{method:"POST"})).ok?(n(v,{type:"success",text:"Settings pulled from V1"},!0),await Q(),n(N,!0),n(A,""),n(I,"")):n(v,{type:"error",text:"Failed to pull settings"},!0)}catch{n(v,{type:"error",text:"Connection error"},!0)}}async function Ye(){if(!e(A).trim()){n(v,{type:"error",text:"Profile name required"},!0);return}if(!e(k)||!e(k).settings){n(v,{type:"error",text:"No settings to save"},!0);return}try{const r={name:e(A).trim(),description:e(I).trim(),settings:e(k).settings},o=await fetch("/api/v1/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(o.ok)n(v,{type:"success",text:`Profile "${e(A)}" saved`},!0),n(N,!1),await je();else{const _=await o.text();n(v,{type:"error",text:`Failed to save: ${_}`},!0)}}catch{n(v,{type:"error",text:"Connection error"},!0)}}function Ze(){e(k)&&e(k).settings&&(n(K,{...e(k).settings},!0),n(p,!0))}function $e(){n(K,null),n(p,!1)}async function et(){if(e(K)){n(v,{type:"info",text:"Pushing edited settings to V1..."},!0);try{const r={settings:e(K)},o=await fetch("/api/v1/push",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(o.ok)n(v,{type:"success",text:"Settings pushed to V1"},!0),e(k).settings=e(K),n(p,!1),n(K,null),await Q();else{const _=await o.text();n(v,{type:"error",text:`Failed to push: ${_}`},!0)}}catch(r){n(v,{type:"error",text:`Connection error: ${r.message}`},!0)}}}async function tt(r){n(v,{type:"info",text:`Pushing ${r} to V1...`},!0);try{const o=new FormData;o.append("name",r),(await fetch("/api/v1/push",{method:"POST",body:o})).ok?(n(v,{type:"success",text:`${r} pushed to V1`},!0),await Q()):n(v,{type:"error",text:"Failed to push profile"},!0)}catch{n(v,{type:"error",text:"Connection error"},!0)}}async function at(r){if(confirm(`Delete profile "${r}"?`))try{const o=new FormData;o.append("name",r),(await fetch("/api/v1/profile/delete",{method:"POST",body:o})).ok&&(n(E,e(E).filter(g=>g.name!==r),!0),n(v,{type:"success",text:"Profile deleted"},!0))}catch{n(v,{type:"error",text:"Failed to delete"},!0)}}var W=ea(),Y=i(W),Z=s(i(Y),2),st=i(Z,!0);l(Z),l(Y);var qe=s(Y,2);{var lt=r=>{var o=Lt(),_=i(o),g=i(_,!0);l(_),l(o),M(()=>{Ge(o,1,`alert alert-${e(v).type==="error"?"error":e(v).type==="success"?"success":"info"}`),L(g,e(v).text)}),u(r,o)};P(qe,r=>{e(v)&&r(lt)})}var Ae=s(qe,2);{var it=r=>{var o=Kt(),_=i(o),g=s(i(_),2),O=i(g),h=s(i(O),2);b(h),l(O);var t=s(O,2),w=s(i(t),2);b(w),l(t),l(g);var S=s(g,2),F=i(S);F.__click=()=>n(N,!1);var R=s(F,2);R.__click=Ye,l(S),l(_),l(o),Ie(h,()=>e(A),V=>n(A,V)),Ie(w,()=>e(I),V=>n(I,V)),u(r,o)};P(Ae,r=>{e(N)&&r(it)})}var $=s(Ae,2),Be=i($),He=s(i(Be),2);{var rt=r=>{var o=jt();u(r,o)},ot=r=>{var o=ze(),_=G(o);{var g=h=>{const t=Mt(()=>e(p)?e(K):e(k).settings);var w=zt(),S=s(i(w),2),F=i(S);b(F),f(2),l(S);var R=s(S,2),V=i(R);b(V),f(2),l(R);var X=s(R,2),B=i(X);b(B),f(2),l(X);var J=s(X,2),H=i(J);b(H),f(2),l(J);var j=s(J,2),z=i(j);b(z),f(2),l(j);var ee=s(j,4),bt=s(i(ee),2);{var _t=a=>{var c=qt(),d=i(c);d.value=d.__value=1;var y=s(d);y.value=y.__value=2;var D=s(y);D.value=D.__value=3,l(c),U(c,()=>e(t).kaSensitivity,q=>e(t).kaSensitivity=q),u(a,c)},ft=a=>{var c=At(),d=i(c,!0);l(c),M(()=>L(d,e(t).kaSensitivity===3?"Full":e(t).kaSensitivity===2?"Original":"Relaxed")),u(a,c)};P(bt,a=>{e(p)?a(_t):a(ft,!1)})}l(ee);var te=s(ee,2),xt=s(i(te),2);{var mt=a=>{var c=Bt(),d=i(c);d.value=d.__value=1;var y=s(d);y.value=y.__value=2;var D=s(y);D.value=D.__value=3,l(c),U(c,()=>e(t).kSensitivity,q=>e(t).kSensitivity=q),u(a,c)},ht=a=>{var c=Ht(),d=i(c,!0);l(c),M(()=>L(d,e(t).kSensitivity===3?"Original":e(t).kSensitivity===2?"Full":"Relaxed")),u(a,c)};P(xt,a=>{e(p)?a(mt):a(ht,!1)})}l(te);var ae=s(te,2),gt=s(i(ae),2);{var yt=a=>{var c=Et(),d=i(c);d.value=d.__value=1;var y=s(d);y.value=y.__value=2;var D=s(y);D.value=D.__value=3,l(c),U(c,()=>e(t).xSensitivity,q=>e(t).xSensitivity=q),u(a,c)},kt=a=>{var c=Nt(),d=i(c,!0);l(c),M(()=>L(d,e(t).xSensitivity===3?"Original":e(t).xSensitivity===2?"Full":"Relaxed")),u(a,c)};P(gt,a=>{e(p)?a(yt):a(kt,!1)})}l(ae);var se=s(ae,4),St=s(i(se),2);{var wt=a=>{var c=Xt(),d=i(c);d.value=d.__value=1;var y=s(d);y.value=y.__value=2;var D=s(y);D.value=D.__value=3,l(c),U(c,()=>e(t).autoMute,q=>e(t).autoMute=q),u(a,c)},Pt=a=>{var c=Jt(),d=i(c,!0);l(c),M(()=>L(d,e(t).autoMute===3?"Off":e(t).autoMute===2?"Advanced":"On")),u(a,c)};P(St,a=>{e(p)?a(wt):a(Pt,!1)})}l(se);var le=s(se,2),ie=i(le);b(ie),f(2),l(le);var re=s(le,2),oe=i(re);b(oe),f(2),l(re);var ne=s(re,2),ce=i(ne);b(ce),f(2),l(ne);var pe=s(ne,2),ve=i(pe);b(ve),f(2),l(pe);var de=s(pe,2),ue=i(de);b(ue),f(2),l(de);var be=s(de,4),_e=i(be);b(_e),f(2),l(be);var fe=s(be,2),xe=i(fe);b(xe),f(2),l(fe);var me=s(fe,2),he=i(me);b(he),f(2),l(me);var ge=s(me,4),ye=i(ge);b(ye),f(2),l(ge);var ke=s(ge,2),Se=i(ke);b(Se),f(2),l(ke);var we=s(ke,2),Pe=i(we);b(Pe),f(2),l(we);var Ve=s(we,2),De=i(Ve);b(De),f(2),l(Ve);var Fe=s(Ve,2),Ce=i(Fe);b(Ce),f(2),l(Fe);var Me=s(Fe,2),Oe=i(Me);b(Oe),f(2),l(Me);var Re=s(Me,2),Te=i(Re);b(Te),f(2),l(Re);var Je=s(Re,2),Le=i(Je);b(Le),f(2),l(Je),l(w),M(()=>{F.disabled=!e(p),V.disabled=!e(p),B.disabled=!e(p),H.disabled=!e(p),z.disabled=!e(p),ie.disabled=!e(p),oe.disabled=!e(p),ce.disabled=!e(p),ve.disabled=!e(p),ue.disabled=!e(p),_e.disabled=!e(p),xe.disabled=!e(p),he.disabled=!e(p),ye.disabled=!e(p),Se.disabled=!e(p),Pe.disabled=!e(p),De.disabled=!e(p),Ce.disabled=!e(p),Oe.disabled=!e(p),Te.disabled=!e(p),Le.disabled=!e(p)}),x(F,()=>e(t).ka,a=>e(t).ka=a),x(V,()=>e(t).k,a=>e(t).k=a),x(B,()=>e(t).x,a=>e(t).x=a),x(H,()=>e(t).laser,a=>e(t).laser=a),x(z,()=>e(t).ku,a=>e(t).ku=a),x(ie,()=>e(t).kVerifier,a=>e(t).kVerifier=a),x(oe,()=>e(t).fastLaserDetect,a=>e(t).fastLaserDetect=a),x(ce,()=>e(t).laserRear,a=>e(t).laserRear=a),x(ve,()=>e(t).euroMode,a=>e(t).euroMode=a),x(ue,()=>e(t).mrct,a=>e(t).mrct=a),x(_e,()=>e(t).startupSequence,a=>e(t).startupSequence=a),x(xe,()=>e(t).restingDisplay,a=>e(t).restingDisplay=a),x(he,()=>e(t).bogeyLockLoud,a=>e(t).bogeyLockLoud=a),x(ye,()=>e(t).muteXKRear,a=>e(t).muteXKRear=a),x(Se,()=>e(t).kaAlwaysPriority,a=>e(t).kaAlwaysPriority=a),x(Pe,()=>e(t).muteToMuteVolume,a=>e(t).muteToMuteVolume=a),x(De,()=>e(t).customFreqs,a=>e(t).customFreqs=a),x(Ce,()=>e(t).bsmPlus,a=>e(t).bsmPlus=a),x(Oe,()=>e(t).driveSafe3D,a=>e(t).driveSafe3D=a),x(Te,()=>e(t).driveSafe3DHD,a=>e(t).driveSafe3DHD=a),x(Le,()=>e(t).redflexHalo,a=>e(t).redflexHalo=a),u(h,w)},O=h=>{var t=Gt();u(h,t)};P(_,h=>{e(k)&&e(k).settings?h(g):h(O,!1)},!0)}u(r,o)};P(He,r=>{e(T)?r(ot,!1):r(rt)})}var Ee=s(He,2),nt=i(Ee);{var ct=r=>{var o=It(),_=G(o);_.__click=$e;var g=s(_,2);g.__click=et,u(r,o)},pt=r=>{var o=Ut(),_=G(o);_.__click=We;var g=s(_,2);{var O=h=>{var t=Qt(),w=G(t);w.__click=Ze;var S=s(w,2);S.__click=()=>n(N,!0),M(()=>w.disabled=!e(T)),u(h,t)};P(g,h=>{e(k)&&e(k).settings&&h(O)})}M(()=>_.disabled=!e(T)),u(r,o)};P(nt,r=>{e(p)?r(ct):r(pt,!1)})}l(Ee),l(Be),l($);var Ne=s($,2),Xe=i(Ne),vt=s(i(Xe),2);{var dt=r=>{var o=Wt();u(r,o)},ut=r=>{var o=ze(),_=G(o);{var g=h=>{var t=Yt();u(h,t)},O=h=>{var t=$t();Rt(t,21,()=>e(E),Tt,(w,S)=>{var F=Zt(),R=i(F),V=i(R),X=i(V,!0);l(V);var B=s(V,2),J=i(B,!0);l(B),l(R);var H=s(R,2),j=i(H);j.__click=()=>tt(e(S).name);var z=s(j,2);z.__click=()=>at(e(S).name),l(H),l(F),M(()=>{L(X,e(S).name),L(J,e(S).description||"No description"),j.disabled=!e(T)}),u(w,F)}),l(t),u(h,t)};P(_,h=>{e(E).length===0?h(g):h(O,!1)},!0)}u(r,o)};P(vt,r=>{e(Ke)?r(dt):r(ut,!1)})}l(Xe),l(Ne),f(2),l(W),M(()=>{Ge(Z,1,`badge ${e(T)?"badge-success":"badge-warning"}`),L(st,e(T)?"V1 Connected":"V1 Disconnected")}),u(Qe,W),Ct()}Ot(["click"]);export{va as component};
