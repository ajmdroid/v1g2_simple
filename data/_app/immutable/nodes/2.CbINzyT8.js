import{f,a as o,t as F,c as _a}from"../chunks/DazeWHNr.js";import{o as fa}from"../chunks/BbGLgnJb.js";import{p as xa,s as S,a as ma,b as ha,c as w,d as s,g as r,e as d,r as e,t as m,f as y,n as G}from"../chunks/D7c9vuRB.js";import{s as _}from"../chunks/DhcWgYw3.js";import{i as h}from"../chunks/ClKWcuAI.js";import{s as z}from"../chunks/CsEuG8qE.js";var ga=f('<div class="alert alert-warning shadow-lg animate-pulse"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div><span class="font-bold text-2xl"> </span> <span class="text-lg ml-2"> </span> <span class="ml-4"> </span></div></div>'),ua=f('<span class="loading loading-spinner loading-sm"></span>'),ba=f('<div> </div> <div class="text-xs text-base-content/60">Bluetooth LE</div>',1),wa=f('<span class="loading loading-spinner loading-sm"></span>'),ya=f("<div> </div>"),Ma=f("<div> </div> <!>",1),ka=f('<span class="loading loading-spinner loading-sm"></span>'),Aa=f('<div class="text-xl font-bold"> </div> <div class="text-xs text-base-content/60"> </div>',1),Pa=f('<span class="loading loading-spinner loading-sm"></span>'),$a=f('<div class="text-xl font-bold text-warning"> </div> <div class="text-xs"> </div>',1),Ba=f('<div class="text-xl font-bold text-success">Clear</div> <div class="text-xs text-base-content/60">No threats</div>',1),Ca=f('<div class="toast toast-end"><div class="alert alert-error"><span> </span></div></div>'),Sa=f('<div class="space-y-6"><!> <div class="hero bg-base-200 rounded-box p-4"><div class="hero-content text-center"><div><h1 class="text-3xl font-bold text-primary">V1 Gen2 Display</h1> <p class="text-sm text-base-content/70"><!></p></div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="card bg-base-200 shadow-xl"><div class="card-body p-4"><h2 class="card-title text-sm"><span class="text-xl">ğŸ“¡</span> Valentine One</h2> <!></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body p-4"><h2 class="card-title text-sm"><span class="text-xl">ğŸ“¶</span> WiFi</h2> <!></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body p-4"><h2 class="card-title text-sm"><span class="text-xl">â±ï¸</span> Uptime</h2> <!></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body p-4"><h2 class="card-title text-sm"><span class="text-xl">ğŸš¨</span> Alerts</h2> <!></div></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body p-4"><h2 class="card-title text-sm mb-2">Quick Actions</h2> <div class="flex flex-wrap gap-2"><a href="/autopush" class="btn btn-accent btn-sm">ğŸš— Auto-Push</a> <a href="/profiles" class="btn btn-primary btn-sm">ğŸ“Š Profiles</a> <a href="/devices" class="btn btn-secondary btn-sm">ğŸ“¡ Saved V1s</a> <a href="/alerts" class="btn btn-outline btn-sm">ğŸ“‹ Alerts</a></div></div></div> <!></div>');function qa(K,N){xa(N,!0);let n=S(ma({wifi:{sta_connected:!1,ap_active:!1,sta_ip:"",ap_ip:"",ssid:"",rssi:0},device:{uptime:0,heap_free:0,hostname:"v1g2"},v1_connected:!1,alert:null})),g=S(!0),u=S(null);fa(async()=>{await I();const a=setInterval(I,2e3);return()=>clearInterval(a)});async function I(){try{const a=await fetch("/api/status");if(a.ok){const t=await a.json();w(n,t,!0),w(u,null)}else w(u,"API error")}catch{w(u,"Connection lost")}finally{w(g,!1)}}function Q(a){const t=Math.floor(a/86400),i=Math.floor(a%86400/3600),l=Math.floor(a%3600/60);return t>0?`${t}d ${i}h ${l}m`:i>0?`${i}h ${l}m`:`${l}m`}function R(a){return a>=-50?"text-success":a>=-70?"text-warning":"text-error"}var k=Sa(),L=s(k);{var W=a=>{var t=ga(),i=d(s(t),2),l=s(i),x=s(l,!0);e(l);var c=d(l,2),v=s(c);e(c);var p=d(c,2),b=s(p);e(p),e(i),e(t),m(()=>{_(x,r(n).alert.band),_(v,`${r(n).alert.frequency??""} MHz`),_(b,`Strength: ${r(n).alert.strength??""}/8`)}),o(a,t)};h(L,a=>{var t;(t=r(n).alert)!=null&&t.active&&a(W)})}var A=d(L,2),O=s(A),V=s(O),j=d(s(V),2),J=s(j);{var T=a=>{var t=F();m(()=>_(t,`${r(n).wifi.ssid??""} â€¢ ${r(n).wifi.sta_ip??""}`)),o(a,t)},X=a=>{var t=F();m(()=>_(t,`AP Mode â€¢ ${r(n).wifi.ap_ip??""}`)),o(a,t)};h(J,a=>{r(n).wifi.sta_connected?a(T):a(X,!1)})}e(j),e(V),e(O),e(A);var P=d(A,2),$=s(P),q=s($),Y=d(s(q),2);{var Z=a=>{var t=ua();o(a,t)},aa=a=>{var t=ba(),i=y(t),l=s(i,!0);e(i),G(2),m(()=>{z(i,1,`text-xl font-bold ${r(n).v1_connected?"text-success":"text-warning"}`),_(l,r(n).v1_connected?"Connected":"Scanning...")}),o(a,t)};h(Y,a=>{r(g)?a(Z):a(aa,!1)})}e(q),e($);var B=d($,2),H=s(B),ta=d(s(H),2);{var sa=a=>{var t=wa();o(a,t)},ea=a=>{var t=Ma(),i=y(t),l=s(i,!0);e(i);var x=d(i,2);{var c=v=>{var p=ya(),b=s(p);e(p),m(M=>{z(p,1,`text-xs ${M??""}`),_(b,`${r(n).wifi.rssi??""} dBm`)},[()=>R(r(n).wifi.rssi)]),o(v,p)};h(x,v=>{r(n).wifi.sta_connected&&v(c)})}m(()=>{z(i,1,`text-xl font-bold ${r(n).wifi.sta_connected?"text-success":"text-info"}`),_(l,r(n).wifi.sta_connected?"Online":"AP Only")}),o(a,t)};h(ta,a=>{r(g)?a(sa):a(ea,!1)})}e(H),e(B);var C=d(B,2),U=s(C),ra=d(s(U),2);{var ia=a=>{var t=ka();o(a,t)},na=a=>{var t=Aa(),i=y(t),l=s(i,!0);e(i);var x=d(i,2),c=s(x);e(x),m((v,p)=>{_(l,v),_(c,`${p??""} KB free`)},[()=>{var v;return Q(((v=r(n).device)==null?void 0:v.uptime)||0)},()=>{var v;return Math.round((((v=r(n).device)==null?void 0:v.heap_free)||0)/1024)}]),o(a,t)};h(ra,a=>{r(g)?a(ia):a(na,!1)})}e(U),e(C);var D=d(C,2),E=s(D),va=d(s(E),2);{var la=a=>{var t=Pa();o(a,t)},da=a=>{var t=_a(),i=y(t);{var l=c=>{var v=$a(),p=y(v),b=s(p,!0);e(p);var M=d(p,2),pa=s(M);e(M),m(()=>{_(b,r(n).alert.band),_(pa,`${r(n).alert.frequency??""} MHz`)}),o(c,v)},x=c=>{var v=Ba();G(2),o(c,v)};h(i,c=>{var v;(v=r(n).alert)!=null&&v.active?c(l):c(x,!1)},!0)}o(a,t)};h(va,a=>{r(g)?a(la):a(da,!1)})}e(E),e(D),e(P);var oa=d(P,4);{var ca=a=>{var t=Ca(),i=s(t),l=s(i),x=s(l,!0);e(l),e(i),e(t),m(()=>_(x,r(u))),o(a,t)};h(oa,a=>{r(u)&&a(ca)})}e(k),o(K,k),ha()}export{qa as component};
