import{f as u,a as v}from"../chunks/BAToY3dM.js";import{o as oa}from"../chunks/tgyn-xxr.js";import{p as la,s as g,a as na,b as da,e,d as r,c as d,g as a,r as i,t as K,f as ca,n as pa}from"../chunks/fsS-m6VO.js";import{d as va,s as ua}from"../chunks/DKvjqhBm.js";import{i as j}from"../chunks/DGklRumq.js";import{r as p}from"../chunks/DtA2OqT-.js";import{s as _a}from"../chunks/DOhhwrM8.js";import{b as h,c as O}from"../chunks/DQHpviRV.js";var ba=u('<div role="status" aria-live="polite"><span> </span></div>'),fa=u('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),ma=u('<span class="loading loading-spinner loading-sm"></span>'),wa=u('<div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì∂ WiFi Network</h2> <p class="text-sm text-base-content/60">Connect to your home/car WiFi network</p> <div class="form-control"><label class="label"><span class="label-text">Network Name (SSID)</span></label> <input type="text" class="input input-bordered" placeholder="Your WiFi network"/></div> <div class="form-control"><label class="label"><span class="label-text">Password</span></label> <input type="password" class="input input-bordered" placeholder="WiFi password"/></div> <button class="btn btn-outline btn-sm mt-2">üîç Scan Networks</button></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üì° Access Point</h2> <p class="text-sm text-base-content/60">The WiFi network this device broadcasts</p> <div class="form-control"><label class="label"><span class="label-text">AP Name</span></label> <input type="text" class="input input-bordered" placeholder="V1G2-Display"/></div> <div class="form-control"><label class="label"><span class="label-text">AP Password</span></label> <input type="password" class="input input-bordered" placeholder="At least 8 characters"/></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">üîß WiFi Mode</h2> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP Only (creates hotspot)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">Station Only (connects to network)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP + Station (recommended)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div></div></div> <button class="btn btn-primary btn-block"><!> Save Settings</button>',1),ya=u('<div class="space-y-6"><h1 class="text-2xl font-bold">Settings</h1> <!> <!></div>');function Aa(L,Q){la(Q,!0);const x=[];let t=g(na({ssid:"",password:"",ap_ssid:"",ap_password:"",wifi_mode:2})),C=g(!0),_=g(!1),n=g(null);oa(async()=>{await R()});async function R(){try{const s=await fetch("/api/settings");if(s.ok){const l=await s.json();d(t,{...a(t),...l},!0)}}catch{d(n,{type:"error",text:"Failed to load settings"},!0)}finally{d(C,!1)}}async function U(){d(_,!0),d(n,null);try{const s=new FormData;s.append("ssid",a(t).ssid),s.append("password",a(t).password),s.append("ap_ssid",a(t).ap_ssid),s.append("ap_password",a(t).ap_password),s.append("wifi_mode",a(t).wifi_mode),(await fetch("/settings",{method:"POST",body:s})).ok?d(n,{type:"success",text:"Settings saved! WiFi will restart."},!0):d(n,{type:"error",text:"Failed to save settings"},!0)}catch{d(n,{type:"error",text:"Connection error"},!0)}finally{d(_,!1)}}async function X(){var s;d(n,{type:"info",text:"Scanning for networks..."},!0);try{const l=await fetch("/api/scan");if(l.ok){const c=await l.json();d(n,{type:"success",text:`Found ${((s=c.networks)==null?void 0:s.length)||0} networks`},!0)}}catch{d(n,{type:"error",text:"Scan failed"},!0)}}var k=ya(),M=e(r(k),2);{var Z=s=>{var l=ba(),c=r(l),b=r(c,!0);i(c),i(l),K(()=>{_a(l,1,`alert alert-${a(n).type==="error"?"error":a(n).type==="success"?"success":"info"}`),ua(b,a(n).text)}),v(s,l)};j(M,s=>{a(n)&&s(Z)})}var $=e(M,2);{var aa=s=>{var l=fa();v(s,l)},sa=s=>{var l=wa(),c=ca(l),b=r(c),S=e(r(b),4),T=e(r(S),2);p(T),i(S);var F=e(S,2),G=e(r(F),2);p(G),i(F);var ta=e(F,2);ta.__click=X,i(b),i(c);var P=e(c,2),I=r(P),W=e(r(I),4),V=e(r(W),2);p(V),i(W);var Y=e(W,2),q=e(r(Y),2);p(q),i(Y),i(I),i(P);var A=e(P,2),z=r(A),N=e(r(z),2),B=r(N),f=e(r(B),2);p(f),f.value=f.__value=0,i(B),i(N);var D=e(N,2),E=r(D),m=e(r(E),2);p(m),m.value=m.__value=1,i(E),i(D);var H=e(D,2),J=r(H),w=e(r(J),2);p(w),w.value=w.__value=2,i(J),i(H),i(z),i(A);var y=e(A,2);y.__click=U;var ea=r(y);{var ra=o=>{var ia=ma();v(o,ia)};j(ea,o=>{a(_)&&o(ra)})}pa(),i(y),K(()=>y.disabled=a(_)),h(T,()=>a(t).ssid,o=>a(t).ssid=o),h(G,()=>a(t).password,o=>a(t).password=o),h(V,()=>a(t).ap_ssid,o=>a(t).ap_ssid=o),h(q,()=>a(t).ap_password,o=>a(t).ap_password=o),O(x,[],f,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),O(x,[],m,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),O(x,[],w,()=>a(t).wifi_mode,o=>a(t).wifi_mode=o),v(s,l)};j($,s=>{a(C)?s(aa):s(sa,!1)})}i(k),v(L,k),da()}va(["click"]);export{Aa as component};
