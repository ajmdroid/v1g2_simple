import{f as c,a as v}from"../chunks/_fC9Mge7.js";import{o as sa}from"../chunks/dam9Bk7g.js";import{h as G,v as ea,w as P,x as ra,y as S,z as o,A as ia,B as t,C as R,D as n,F as s,G as b,I as oa}from"../chunks/3QlmZnHB.js";import{d as na,s as g}from"../chunks/BPGE2kEC.js";import{i as x}from"../chunks/Br8_PJsR.js";function da(d,w,r){var l=d==null?"":""+d;return l===""?null:l}function U(d,w,r,l,y,M){var p=d.__className;if(G||p!==r||p===void 0){var h=da(r);(!G||h!==d.getAttribute("class"))&&(h==null?d.removeAttribute("class"):d.className=h),d.__className=r}return M}var la=c('<span class="loading loading-spinner loading-md"></span>'),va=c('<div class="stat-desc"> </div>'),ca=c("<div> </div> <!>",1),ha=c('<span class="loading loading-spinner loading-md"></span>'),ma=c('<div> </div> <div class="stat-desc">Bluetooth LE</div>',1),pa=c('<span class="loading loading-spinner loading-md"></span>'),fa=c('<div class="text-sm space-y-1"><div> </div> <div> </div></div>'),ua=c('<div class="space-y-6"><div class="hero bg-base-200 rounded-box p-6"><div class="hero-content text-center"><div><h1 class="text-4xl font-bold text-primary">V1 Gen2 Display</h1> <p class="py-4 text-base-content/70">Valentine One Radar Detector Interface</p></div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><div class="card bg-base-200 shadow-xl"><div class="card-body"><h2 class="card-title"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path></svg> WiFi Status</h2> <!></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body"><h2 class="card-title"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> V1 Connection</h2> <!></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body"><h2 class="card-title"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path></svg> System</h2> <!></div></div></div> <div class="card bg-base-200 shadow-xl"><div class="card-body"><h2 class="card-title">Quick Actions</h2> <div class="flex flex-wrap gap-2"><a href="/settings" class="btn btn-primary btn-sm">WiFi Settings</a> <a href="/logs" class="btn btn-secondary btn-sm">View Logs</a> <a href="/profiles" class="btn btn-accent btn-sm">V1 Profiles</a> <button class="btn btn-outline btn-sm">Mute V1</button></div></div></div></div> <dialog id="mute-modal" class="modal"><div class="modal-box"><h3 class="font-bold text-lg">Mute Valentine One</h3> <p class="py-4">Send mute command to the V1?</p> <div class="modal-action"><form method="dialog"><button class="btn btn-ghost">Cancel</button> <button class="btn btn-primary">Mute</button></form></div></div></dialog>',1);function ya(d,w){ea(w,!0);let r=P(ra({connected:!1,bleConnected:!1,rssi:0,uptime:0,freeHeap:0})),l=P(!0);sa(async()=>{await y();const a=setInterval(y,5e3);return()=>clearInterval(a)});async function y(){try{const a=await fetch("/api/status");if(a.ok){const e=await a.json();R(r,{...n(r),...e,connected:!0},!0)}}catch{n(r).connected=!1}finally{R(l,!1)}}function M(a){const e=Math.floor(a/3600),i=Math.floor(a%3600/60),m=a%60;return`${e}h ${i}m ${m}s`}var p=ua(),h=S(p),k=o(t(h),2),C=t(k),H=t(C),W=o(t(H),2);{var $=a=>{var e=la();v(a,e)},K=a=>{var e=ca(),i=S(e),m=t(i,!0);s(i);var _=o(i,2);{var B=f=>{var u=va(),ta=t(u);s(u),b(()=>g(ta,`Signal: ${n(r).rssi??""} dBm`)),v(f,u)};x(_,f=>{n(r).rssi&&f(B)})}b(()=>{U(i,1,`stat-value text-lg ${n(r).connected?"text-success":"text-error"}`),g(m,n(r).connected?"Connected":"Disconnected")}),v(a,e)};x(W,a=>{n(l)?a($):a(K,!1)})}s(H),s(C);var V=o(C,2),A=t(V),Q=o(t(A),2);{var T=a=>{var e=ha();v(a,e)},q=a=>{var e=ma(),i=S(e),m=t(i,!0);s(i),oa(2),b(()=>{U(i,1,`stat-value text-lg ${n(r).bleConnected?"text-success":"text-warning"}`),g(m,n(r).bleConnected?"Connected":"Searching...")}),v(a,e)};x(Q,a=>{n(l)?a(T):a(q,!1)})}s(A),s(V);var I=o(V,2),j=t(I),J=o(t(j),2);{var X=a=>{var e=pa();v(a,e)},Y=a=>{var e=fa(),i=t(e),m=t(i);s(i);var _=o(i,2),B=t(_);s(_),s(e),b((f,u)=>{g(m,`Uptime: ${f??""}`),g(B,`Free RAM: ${u??""} KB`)},[()=>M(n(r).uptime||0),()=>Math.round((n(r).freeHeap||0)/1024)]),v(a,e)};x(J,a=>{n(l)?a(X):a(Y,!1)})}s(j),s(I),s(k);var z=o(k,2),D=t(z),F=o(t(D),2),Z=o(t(F),6);Z.__click=()=>document.getElementById("mute-modal").showModal(),s(F),s(D),s(z),s(h);var L=o(h,2),N=t(L),O=o(t(N),4),E=t(O),aa=o(t(E),2);aa.__click=()=>fetch("/mute",{method:"POST"}),s(E),s(O),s(N),s(L),v(d,p),ia()}na(["click"]);export{ya as component};
