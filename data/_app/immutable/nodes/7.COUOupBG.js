import{f as _,a as v}from"../chunks/CJzwpuKh.js";import{o as va}from"../chunks/tgyn-xxr.js";import{p as ba,s as g,a as _a,b as ua,e as t,d as r,c as d,g as a,r as i,t as Z,f as fa,n as ma}from"../chunks/fsS-m6VO.js";import{d as ya,s as wa}from"../chunks/jRq-jFgM.js";import{i as E}from"../chunks/DGklRumq.js";import{r as p}from"../chunks/CcDg8Ibl.js";import{s as xa}from"../chunks/DOhhwrM8.js";import{b,c as O,a as ga}from"../chunks/DQHpviRV.js";var ha=_('<div role="status" aria-live="polite"><span> </span></div>'),ka=_('<div class="flex justify-center p-8"><span class="loading loading-spinner loading-lg"></span></div>'),Sa=_('<span class="loading loading-spinner loading-sm"></span>'),Fa=_('<div class="card bg-base-200"><div class="card-body"><h2 class="card-title">ğŸ“¶ WiFi Network</h2> <p class="text-sm text-base-content/60">Connect to your home/car WiFi network</p> <div class="form-control"><label class="label" for="wifi-ssid"><span class="label-text">Network Name (SSID)</span></label> <input id="wifi-ssid" type="text" class="input input-bordered" placeholder="Your WiFi network"/></div> <div class="form-control"><label class="label" for="wifi-password"><span class="label-text">Password</span></label> <input id="wifi-password" type="password" class="input input-bordered" placeholder="WiFi password"/></div> <button class="btn btn-outline btn-sm mt-2">ğŸ” Scan Networks</button></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">ğŸ“¡ Access Point</h2> <p class="text-sm text-base-content/60">The WiFi network this device broadcasts</p> <div class="form-control"><label class="label" for="ap-ssid"><span class="label-text">AP Name</span></label> <input id="ap-ssid" type="text" class="input input-bordered" placeholder="V1G2-Display"/></div> <div class="form-control"><label class="label" for="ap-password"><span class="label-text">AP Password</span></label> <input id="ap-password" type="password" class="input input-bordered" placeholder="At least 8 characters"/></div></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title">ğŸ”§ WiFi Mode</h2> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP Only (creates hotspot)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">Station Only (connects to network)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div> <div class="form-control"><label class="label cursor-pointer"><span class="label-text">AP + Station (recommended)</span> <input type="radio" name="wifi_mode" class="radio"/></label></div></div></div> <div class="card bg-base-200"><div class="card-body space-y-4"><h2 class="card-title">ğŸŸ¦ Bluetooth Proxy</h2> <p class="text-sm text-base-content/60">Relay V1 data to apps like JBV1.</p> <label class="label cursor-pointer"><span class="label-text">Enable Proxy</span> <input type="checkbox" class="toggle"/></label> <div class="form-control"><label class="label" for="proxy-name"><span class="label-text">Proxy Name</span></label> <input id="proxy-name" type="text" class="input input-bordered" placeholder="V1C-LE-S3"/></div></div></div> <button class="btn btn-primary btn-block"><!> Save Settings</button>',1),Pa=_('<div class="space-y-6"><h1 class="text-2xl font-bold">Settings</h1> <!> <!></div>');function Oa($,aa){ba(aa,!0);const h=[];let s=g(_a({ssid:"",password:"",ap_ssid:"",ap_password:"",wifi_mode:2,proxy_ble:!0,proxy_name:"V1C-LE-S3"})),B=g(!0),u=g(!1),n=g(null);va(async()=>{await sa()});async function sa(){try{const e=await fetch("/api/settings");if(e.ok){const o=await e.json();d(s,{...a(s),...o},!0)}}catch{d(n,{type:"error",text:"Failed to load settings"},!0)}finally{d(B,!1)}}async function ea(){d(u,!0),d(n,null);try{const e=new FormData;e.append("ssid",a(s).ssid),e.append("password",a(s).password),e.append("ap_ssid",a(s).ap_ssid),e.append("ap_password",a(s).ap_password),e.append("wifi_mode",a(s).wifi_mode),e.append("proxy_ble",a(s).proxy_ble),e.append("proxy_name",a(s).proxy_name),(await fetch("/settings",{method:"POST",body:e})).ok?d(n,{type:"success",text:"Settings saved! WiFi will restart."},!0):d(n,{type:"error",text:"Failed to save settings"},!0)}catch{d(n,{type:"error",text:"Connection error"},!0)}finally{d(u,!1)}}async function ta(){var e;d(n,{type:"info",text:"Scanning for networks..."},!0);try{const o=await fetch("/api/scan");if(o.ok){const c=await o.json();d(n,{type:"success",text:`Found ${((e=c.networks)==null?void 0:e.length)||0} networks`},!0)}}catch{d(n,{type:"error",text:"Scan failed"},!0)}}var k=Pa(),L=t(r(k),2);{var ra=e=>{var o=ha(),c=r(o),f=r(c,!0);i(c),i(o),Z(()=>{xa(o,1,`alert alert-${a(n).type==="error"?"error":a(n).type==="success"?"success":"info"}`),wa(f,a(n).text)}),v(e,o)};E(L,e=>{a(n)&&e(ra)})}var ia=t(L,2);{var la=e=>{var o=ka();v(e,o)},oa=e=>{var o=Fa(),c=fa(o),f=r(c),S=t(r(f),4),M=t(r(S),2);p(M),i(S);var F=t(S,2),T=t(r(F),2);p(T),i(F);var na=t(F,2);na.__click=ta,i(f),i(c);var P=t(c,2),G=r(P),N=t(r(G),4),I=t(r(N),2);p(I),i(N);var J=t(N,2),R=t(r(J),2);p(R),i(J),i(G),i(P);var W=t(P,2),Y=r(W),A=t(r(Y),2),q=r(A),m=t(r(q),2);p(m),m.value=m.__value=0,i(q),i(A);var V=t(A,2),z=r(V),y=t(r(z),2);p(y),y.value=y.__value=1,i(z),i(V);var H=t(V,2),K=r(H),w=t(r(K),2);p(w),w.value=w.__value=2,i(K),i(H),i(Y),i(W);var C=t(W,2),Q=r(C),D=t(r(Q),4),U=t(r(D),2);p(U),i(D);var X=t(D,2),j=t(r(X),2);p(j),i(X),i(Q),i(C);var x=t(C,2);x.__click=ea;var da=r(x);{var pa=l=>{var ca=Sa();v(l,ca)};E(da,l=>{a(u)&&l(pa)})}ma(),i(x),Z(()=>{j.disabled=!a(s).proxy_ble,x.disabled=a(u)}),b(M,()=>a(s).ssid,l=>a(s).ssid=l),b(T,()=>a(s).password,l=>a(s).password=l),b(I,()=>a(s).ap_ssid,l=>a(s).ap_ssid=l),b(R,()=>a(s).ap_password,l=>a(s).ap_password=l),O(h,[],m,()=>a(s).wifi_mode,l=>a(s).wifi_mode=l),O(h,[],y,()=>a(s).wifi_mode,l=>a(s).wifi_mode=l),O(h,[],w,()=>a(s).wifi_mode,l=>a(s).wifi_mode=l),ga(U,()=>a(s).proxy_ble,l=>a(s).proxy_ble=l),b(j,()=>a(s).proxy_name,l=>a(s).proxy_name=l),v(e,o)};E(ia,e=>{a(B)?e(la):e(oa,!1)})}i(k),v($,k),ua()}ya(["click"]);export{Oa as component};
