import{l as n,i as t,a1 as E,x as i,a2 as q,a3 as S,k as w,q as A,v as V,_ as m}from"./PoKKVn1N.js";function C(e,f,l=f){var s=new WeakSet;n(e,"input",async c=>{var v=c?e.defaultValue:e.value;if(v=h(e)?k(v):v,l(v),t!==null&&s.add(t),await E(),v!==(v=f())){var r=e.selectionStart,o=e.selectionEnd,d=e.value.length;if(e.value=v??"",o!==null){var a=e.value.length;r===o&&o===d&&a>d?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=r,e.selectionEnd=Math.min(o,a))}}}),(i&&e.defaultValue!==e.value||q(f)==null&&e.value)&&(l(h(e)?k(e.value):e.value),t!==null&&s.add(t)),S(()=>{var c=f();if(e===document.activeElement){var v=w??t;if(s.has(v))return}h(e)&&c===k(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const u=new Set;function D(e,f,l,s,c=s){var v=l.getAttribute("type")==="checkbox",r=e;let o=!1;if(f!==null)for(var d of f)r=r[d]??(r[d]=[]);r.push(l),n(l,"change",()=>{var a=l.__value;v&&(a=b(r,a,l.checked)),c(a)},()=>c(v?[]:null)),S(()=>{var a=s();if(i&&l.defaultChecked!==l.checked){o=!0;return}v?(a=a||[],l.checked=a.includes(l.__value)):l.checked=A(l.__value,a)}),V(()=>{var a=r.indexOf(l);a!==-1&&r.splice(a,1)}),u.has(r)||(u.add(r),m(()=>{r.sort((a,_)=>a.compareDocumentPosition(_)===4?-1:1),u.delete(r)})),m(()=>{if(o){var a;if(v)a=b(r,a,l.checked);else{var _=r.find(y=>y.checked);a=_==null?void 0:_.__value}c(a)}})}function b(e,f,l){for(var s=new Set,c=0;c<e.length;c+=1)e[c].checked&&s.add(e[c].__value);return l||s.delete(f),Array.from(s)}function h(e){var f=e.type;return f==="number"||f==="range"}function k(e){return e===""?null:+e}export{D as a,C as b};
