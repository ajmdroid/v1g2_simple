import{l as t,i as k,a5 as C,B as b,z as y,a6 as n,k as q,q as w,v as A,a0 as S}from"./BaBLp7YP.js";function V(e,v,l=v){var f=new WeakSet;t(e,"input",async c=>{var d=c?e.defaultValue:e.value;if(d=u(e)?m(d):d,l(d),k!==null&&f.add(k),await C(),d!==(d=v())){var r=e.selectionStart,s=e.selectionEnd,o=e.value.length;if(e.value=d??"",s!==null){var a=e.value.length;r===s&&s===o&&a>o?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=r,e.selectionEnd=Math.min(s,a))}}}),(b&&e.defaultValue!==e.value||y(v)==null&&e.value)&&(l(u(e)?m(e.value):e.value),k!==null&&f.add(k)),n(()=>{var c=v();if(e===document.activeElement){var d=q??k;if(f.has(d))return}u(e)&&c===m(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const _=new Set;function z(e,v,l,f,c=f){var d=l.getAttribute("type")==="checkbox",r=e;let s=!1;if(v!==null)for(var o of v)r=r[o]??(r[o]=[]);r.push(l),t(l,"change",()=>{var a=l.__value;d&&(a=i(r,a,l.checked)),c(a)},()=>c(d?[]:null)),n(()=>{var a=f();if(b&&l.defaultChecked!==l.checked){s=!0;return}d?(a=a||[],l.checked=a.includes(l.__value)):l.checked=w(l.__value,a)}),A(()=>{var a=r.indexOf(l);a!==-1&&r.splice(a,1)}),_.has(r)||(_.add(r),S(()=>{r.sort((a,h)=>a.compareDocumentPosition(h)===4?-1:1),_.delete(r)})),S(()=>{if(s){var a;if(d)a=i(r,a,l.checked);else{var h=r.find(E=>E.checked);a=h==null?void 0:h.__value}c(a)}})}function D(e,v,l=v){t(e,"change",f=>{var c=f?e.defaultChecked:e.checked;l(c)}),(b&&e.defaultChecked!==e.checked||y(v)==null)&&l(e.checked),n(()=>{var f=v();e.checked=!!f})}function i(e,v,l){for(var f=new Set,c=0;c<e.length;c+=1)e[c].checked&&f.add(e[c].__value);return l||f.delete(v),Array.from(f)}function u(e){var v=e.type;return v==="number"||v==="range"}function m(e){return e===""?null:+e}export{D as a,V as b,z as c};
